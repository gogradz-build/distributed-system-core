import{e as h,r as c,f as w,p as E,o as v,g as y,h as P,a as t,w as S,d as l,v as i,k,c as f,l as V,t as x,F as N}from"./app-mDYLW31A.js";import{_ as C}from"./AdminLayout-UUPC1Aa5.js";import"./index-DrsYIacS.js";import"./dataTables.bootstrap4.min-B2_zjVPS.js";import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"row mb-2"},A={class:"col-sm-6"},L={class:"breadcrumb float-sm-right mt-2"},M={class:"breadcrumb-item"},U=["href"],q={class:"breadcrumb-item"},B=["href"],D={class:"row"},R={class:"col-12"},O={class:"card card-secondary"},T={class:"card-body"},$={class:"row"},j={class:"col-lg-6"},F={class:"form-group"},H={class:"col-lg-6"},X={class:"form-group"},z={class:"row"},G={class:"form-group col-lg-6"},J={class:"col-lg-6"},K={class:"form-group"},Q={class:"form-row"},W={class:"col-lg-6"},Y={class:"form-group"},Z={class:"col-lg-6"},ee={class:"form-group"},te={class:"form-row"},se={class:"col-lg-6"},oe={class:"form-group"},ae=["value"],be={__name:"CreateShop",setup(le){const n=h(),u=c(null),o=c({name:"",owner_name:"",contact:"",address:"",ref_id:"",credit_limit:"",email:""}),b=a=>{if(a.preventDefault(),!u.value.checkValidity()){u.value.classList.add("was-validated");return}axios.post("/shops",o.value).then(e=>{var s,r;(s=e==null?void 0:e.data)!=null&&s.message?(localStorage.setItem("successMessage",e.data.message),window.location.href=route("admin.show.shop")):(r=e==null?void 0:e.data)!=null&&r.error&&n.error(e.data.error)}).catch(e=>{var s,r,d,m;(r=(s=e.response)==null?void 0:s.data)!=null&&r.errors?Object.values(e.response.data.errors||{}).flat().forEach(_=>{n.error(_)}):(m=(d=e.response)==null?void 0:d.data)!=null&&m.message?n.error(e.response.data.message):n.error("An unexpected error occurred."),console.error(e)})};w(()=>{g(),E(()=>{document.getElementById("phone-number").addEventListener("input",s=>{s.target.value=s.target.value.replace(/\D/g,""),s.target.value.length>10&&(s.target.value=s.target.value.slice(0,10))});const e=document.getElementById("nic-number");e.addEventListener("input",s=>{const d=s.target.value.replace(/[^0-9VvXx]/g,"");s.target.value=d;const m=/^\d{9}[VvXx]$|^\d{12}$/.test(d);e.setCustomValidity(m?"":"Invalid NIC number")})})});const p=c([]),g=async()=>{try{const a=await axios.get("/refs");p.value=a.data,console.log(a)}catch(a){console.error("Error fetching courses:",a)}};return(a,e)=>(v(),y(C,null,{default:P(()=>[t("div",I,[e[8]||(e[8]=t("div",{class:"col-sm-6"},[t("h2",{class:"mt-2"},"CREATE SHOP")],-1)),t("div",A,[t("ol",L,[t("li",M,[t("a",{href:a.route("admin.dashboard")},"Home",8,U)]),t("li",q,[t("a",{href:a.route("admin.show.shop")},"Shop",8,B)]),e[7]||(e[7]=t("li",{class:"breadcrumb-item active"},"Create Shop",-1))])])]),t("div",D,[t("div",R,[t("div",O,[e[24]||(e[24]=t("div",{class:"card-header card-header-background"},[t("h3",{class:"card-title"},"Shop Details "),t("div",{class:"card-tools"},[t("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[t("i",{class:"fas fa-minus"})]),t("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[t("i",{class:"fas fa-times"})])])],-1)),t("div",T,[t("form",{class:"needs-validation",ref_key:"formRef",ref:u,onSubmit:S(b,["prevent"]),novalidate:""},[t("div",$,[t("div",j,[t("div",F,[e[9]||(e[9]=t("label",{for:"name"},"Shop Name :",-1)),l(t("input",{type:"text",class:"form-control",id:"shop-name",placeholder:"Enter Shop Name","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.name=s),required:""},null,512),[[i,o.value.name]]),e[10]||(e[10]=t("div",{class:"invalid-feedback"}," Please Provide Enter Shop Name ",-1))])]),t("div",H,[t("div",X,[e[11]||(e[11]=t("label",{for:"last-name"},"Owner Name:",-1)),l(t("input",{type:"text",class:"form-control",id:"owner_name",placeholder:"Enter owner_name","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.owner_name=s),required:""},null,512),[[i,o.value.owner_name]]),e[12]||(e[12]=t("div",{class:"invalid-feedback"}," Please Provide Enter Owner Name ",-1))])])]),t("div",z,[t("div",G,[e[13]||(e[13]=t("label",{for:"inputEmail4"},"Email :",-1)),l(t("input",{type:"email",class:"form-control",id:"inputEmail4",placeholder:"Enter Email Address","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.email=s),required:""},null,512),[[i,o.value.email]]),e[14]||(e[14]=t("div",{class:"invalid-feedback"}," Please Provide Enter Valid Email Address ",-1))]),t("div",J,[t("div",K,[e[15]||(e[15]=t("label",{for:"phone-number"},"Phone Number :",-1)),l(t("input",{type:"text",class:"form-control",id:"phone-number",placeholder:"Enter Phone Number","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.contact=s),required:"",pattern:"^(07[0-9])\\d{7}$",title:"Please enter a valid 10-digit Sri Lankan mobile number starting with 07"},null,512),[[i,o.value.contact]]),e[16]||(e[16]=t("div",{class:"invalid-feedback"}," Please Provide Enter Valid Phone Number ",-1))])])]),t("div",Q,[t("div",W,[t("div",Y,[e[17]||(e[17]=t("label",{for:"address"},"Address :",-1)),l(t("input",{type:"text",class:"form-control",id:"address",placeholder:"Enter Address","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.address=s),required:""},null,512),[[i,o.value.address]]),e[18]||(e[18]=t("div",{class:"invalid-feedback"}," Please Provide Enter Address ",-1))])]),t("div",Z,[t("div",ee,[e[19]||(e[19]=t("label",{for:"credit_limit"},"Credit Limit :",-1)),l(t("input",{type:"number",class:"form-control",id:"credit_limit",placeholder:"Enter credit limit","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.credit_limit=s),required:""},null,512),[[i,o.value.credit_limit]]),e[20]||(e[20]=t("div",{class:"invalid-feedback"}," Please Provide Enter Credit Limit ",-1))])])]),t("div",te,[t("div",se,[t("div",oe,[e[22]||(e[22]=t("label",{for:"credit_limit"},"Select Ref :",-1)),l(t("select",{class:"form-select",id:"ref","onUpdate:modelValue":e[6]||(e[6]=s=>o.value.ref_id=s)},[e[21]||(e[21]=t("option",{selected:"",disabled:"",value:""},"Select Ref",-1)),(v(!0),f(N,null,V(p.value,s=>(v(),f("option",{key:s.id,value:s.id},x(s.first_name),9,ae))),128))],512),[[k,o.value.ref_id]])])])]),e[23]||(e[23]=t("div",{class:"row"},[t("div",{class:"col-lg-12 d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary"},"Create Shop")])],-1))],544)])])])])]),_:1}))}};export{be as default};
