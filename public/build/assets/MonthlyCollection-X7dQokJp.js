import{Q as L,d as M,r,f as P,n as _,e as R,q as w,k as A,o as a,l as G,h as N,a as t,w as I,i as U,b as f,m as D,c as n,j as S,t as o,F as x,v as C,s as F}from"./app-DuMmWb0e.js";import{_ as Y}from"./AdminLayout-CuGKItQZ.js";import{$ as h}from"./dataTables.bootstrap4.min-Db9EHKM2.js";/* empty css                       */import"./AdminFooter-i6V7ulTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"row mb-2"},H={class:"col-sm-6"},O=["disabled"],X={class:"col-sm-6 mt-3"},$={class:"breadcrumb float-sm-right"},q={class:"breadcrumb-item"},z=["href"],Q={class:"row mb-4"},J={class:"col-12"},K={class:"row d-flex justify-content-center"},W={class:"col-lg-6 col-12"},Z={class:"input-group mb-3"},tt=["value"],et={class:"col-lg-6 col-12"},st={class:"input-group mb-3"},lt={class:"col-lg-6 col-12"},ot={class:"input-group mb-3"},at={class:"col-lg-6 col-12"},rt={class:"input-group mb-3"},nt={class:"row mt-4"},it={class:"col-12"},dt={class:"card"},ct={class:"card-body"},ut={id:"refTable",class:"table table-hover"},pt={key:0,class:"badge badge-info"},mt={key:1,class:"badge badge-warning"},ft={key:2,class:"badge badge-success"},Dt={__name:"MonthlyCollection",setup(vt){L();const y=M(),d=r(""),u=r(1),p=r(""),m=r(""),v=r(""),b=r("");P(()=>{B(),_(()=>{T()})});const T=()=>{h("#perchesTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0})},k=R(()=>!!b.value.sales),B=async()=>{try{const l=await w.get("/refs");v.value=l.data,console.error(v),_(()=>{h("#perchesTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0})})}catch(l){console.error("Error fetching courses:",l)}};A([u,d,p,m],([l,e,s,i])=>{E(l,e,s,i)});const E=async(l,e,s,i)=>{if(!e)y.warning("Please select a ref");else try{const c={paymentStatus:l,ref_id:e};s&&(c.start_date=s),i&&(c.end_date=i);const g=await w.get(route("get.sales.collection.by.ref",{paymentStatus:l,ref_id:e,params:c}));b.value=g.data,console.log(g),_(()=>{h("#perchesTable").DataTable().clear().rows.add(g.data).draw()})}catch(c){console.error("Error fetching data table:",c)}},V=()=>{d.value?window.location.href=route("admin.collection.report.by.ref",{ref_id:d.value,status_id:u.value,start_date:p.value,end_date:m.value}):y.warning("Please select a ref")};return(l,e)=>(a(),G(Y,null,{default:N(()=>[t("div",j,[t("div",H,[e[5]||(e[5]=t("h4",{class:"mt-3"},"SALES COLLECTION BY REF",-1)),t("a",{href:"#",onClick:I(V,["prevent"])},[t("button",{type:"button",class:"btn btn-success mt-4 mb-4",disabled:!k.value},e[4]||(e[4]=[t("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}},null,-1),U("Collection Report")]),8,O)])]),t("div",X,[t("ol",$,[t("li",q,[t("a",{href:l.route("admin.dashboard")},"Home",8,z)]),e[6]||(e[6]=t("li",{class:"breadcrumb-item active"},[t("a",{href:""},"Report")],-1)),e[7]||(e[7]=t("li",{class:"breadcrumb-item active"},"Sales Collection by Ref",-1))])])]),t("div",Q,[t("div",J,[t("div",K,[t("div",W,[t("div",Z,[e[9]||(e[9]=t("label",{class:"input-group-text",for:"inputGroupSelect01"},[t("img",{src:"/images/icon/user.png",alt:"",width:"20px"})],-1)),f(t("select",{class:"form-select",id:"inputGroupSelect01","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},[e[8]||(e[8]=t("option",{value:"",disabled:""},"Select Ref",-1)),(a(!0),n(x,null,S(v.value,s=>(a(),n("option",{key:s.id,value:s.id},o(s.first_name)+" "+o(s.last_name),9,tt))),128))],512),[[D,d.value]])])]),t("div",et,[t("div",st,[e[11]||(e[11]=t("label",{class:"input-group-text",for:"inputGroupSelect01"},[t("img",{src:"/images/icon/home.png",alt:"",width:"20px"})],-1)),f(t("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},e[10]||(e[10]=[t("option",{value:"1"},"All",-1),t("option",{value:"2"},"Pending",-1),t("option",{value:"3"},"Completed",-1)]),512),[[D,u.value]])])]),t("div",lt,[t("div",ot,[e[12]||(e[12]=t("label",{class:"input-group-text",for:"startDate"},[t("i",{class:"fas fa-calendar"}," Start Date")],-1)),f(t("input",{type:"date",class:"form-control",id:"startDate","onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s)},null,512),[[C,p.value]])])]),t("div",at,[t("div",rt,[e[13]||(e[13]=t("label",{class:"input-group-text",for:"endDate"},[t("i",{class:"fas fa-calendar"}," End Date")],-1)),f(t("input",{type:"date",class:"form-control",id:"endDate","onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s)},null,512),[[C,m.value]])])])])])]),t("div",nt,[t("div",it,[t("div",dt,[e[15]||(e[15]=t("div",{class:"card-header"},[t("h6",{style:{"font-weight":"700"},class:""},"Collection Details")],-1)),t("div",ct,[t("table",ut,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{style:{}},"ID"),t("th",{style:{}},"Invoice ID"),t("th",{style:{}},"Shop Name"),t("th",{style:{}},"Paid Amount"),t("th",{style:{}},"Credit Amount"),t("th",{style:{}},"Status"),t("th",{style:{}},"Status Date"),t("th",{style:{}},"Created At")])],-1)),t("tbody",null,[(a(!0),n(x,null,S(b.value.sales,(s,i)=>(a(),n("tr",{key:r.id},[t("td",null,o(1+i),1),t("td",null,"MH"+o(s.id),1),t("td",null,o(s.shop.name),1),t("td",null,o(s.received_amount),1),t("td",null,o(s.total_price-s.received_amount),1),t("td",null,[s.order_status==="1"?(a(),n("span",pt,"Start to Print")):s.order_status==="2"?(a(),n("span",mt,"Print")):s.order_status==="3"?(a(),n("span",ft,"Delivered")):F("",!0)]),t("td",null,o(new Date(s.status_update_at).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"}).replace(" ","-").replace(",","")),1),t("td",null,o(new Date(s.created_at).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"}).replace(" ","-").replace(",","")),1)]))),128))])])])])])])]),_:1}))}};export{Dt as default};
