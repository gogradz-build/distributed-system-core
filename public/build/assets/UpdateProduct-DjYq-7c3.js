import{Q as Y,e as z,r,j as b,f as G,p as J,n as g,o as c,g as K,h as ee,a as s,w as se,d,v,k as B,c as m,l as M,t as T,F as q}from"./app-mDYLW31A.js";import{_ as oe}from"./AdminLayout-UUPC1Aa5.js";import{$ as N}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./vue-quill.snow-BON5O7Yn.js";import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"row mb-2"},ae={class:"col-sm-6"},re={class:"breadcrumb float-sm-right mt-2"},le={class:"breadcrumb-item"},de=["href"],ie={class:"breadcrumb-item"},ne=["href"],ce={class:"row"},ue={class:"col-12"},ve={class:"card card-secondary"},me={class:"card-body"},fe={class:"row"},pe={class:"col-lg-8"},be={class:"col-12"},ge={class:"form-group"},_e={class:"col-12"},he={class:"form-group"},ye={class:"col-"},we={class:"form-group"},Pe=["value"],Ce={class:"col-12"},Ee={class:"form-group"},ke=["value"],Ue={class:"col-lg-4"},Ve={class:"card card-row card-bg-light"},xe={class:"card-body"},De={class:"card card-info card-outline"},Se={class:"card-body"},Be={class:"col-12"},Me={class:"form-group"},Te={class:"form-group"},We={__name:"UpdateProduct",props:{product:Array},setup(R){var y,w,P,C,E,k,U;Y();const u=z(),f=r(null),l=R,t=r({code:((y=l.product)==null?void 0:y.code)||"",name:((w=l.product)==null?void 0:w.name)||"",cost:((P=l.product)==null?void 0:P.cost)||"",price:((C=l.product)==null?void 0:C.price)||"",image:((E=l.product)==null?void 0:E.code)||"",category_id:((k=l.product)==null?void 0:k.category_id)||"",brand_id:((U=l.product)==null?void 0:U.brand_id)||""}),p=r({});b(p,a=>{t.value.variation_values=p});const A=a=>{if(a.preventDefault(),!f.value.checkValidity()){f.value.classList.add("was-validated");return}g.put(`/products/${l.product.id}`,t.value).then(e=>{var o,n;console.log(e),(o=e==null?void 0:e.data)!=null&&o.message?(localStorage.setItem("successMessage",e.data.message),window.location.href=route("admin.products")):(n=e==null?void 0:e.data)!=null&&n.error&&u.error(e.data.error)}).catch(e=>{var o,n,V,x,D,S;(n=(o=e.response)==null?void 0:o.data)!=null&&n.errors?(console.log((x=(V=e.response)==null?void 0:V.data)==null?void 0:x.errors),Object.values(e.response.data.errors||{}).flat().forEach(X=>{u.error(X)})):(S=(D=e.response)==null?void 0:D.data)!=null&&S.message?u.error(e.response.data.message):u.error("An unexpected error occurred."),console.log(e)})};G(()=>{W(),Z(),H(),Q(),O(),N("#image").fileinput({theme:"fa",uploadUrl:"#",showRemove:!1,showUpload:!1,showZoom:!1,showCaption:!1,browseClass:"btn btn-danger",browseLabel:"",browseIcon:"<i class='fa fa-plus'></i>",overwriteInitial:!1,initialPreviewAsData:!0,fileActionSettings:{showUpload:!1,showZoom:!1,removeIcon:"<i class='fa fa-times'></i>"}}),J(()=>{N("#courseTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!1})})}),b(()=>t.value.variation_id,a=>{p.value={},$(a);const e=document.getElementById("variation_form");a?e.style.display="block":e.style.display="none"}),b(()=>t.variation_values,a=>{console.log("Updated variation values:",a)});const I=r([]),$=async a=>{try{const e=await g.get(route("get.variation.type.data.value",{variation_id:a}));I.value=e.data}catch(e){console.error("Error fetching courses:",e)}},_=r([]),j=r([]),L=r([]),F=r([]),h=r([]),O=()=>i("/brands",h),W=()=>i("/categories",_),Z=()=>i("/suppliers",j),H=()=>i("/warehouses",L),Q=()=>i("/variations",F),i=async(a,e)=>{try{const o=await g.get(a);e.value=o.data}catch(o){console.error(`Error fetching data from ${a}:`,o)}};return(a,e)=>(c(),K(oe,null,{default:ee(()=>[s("div",te,[e[7]||(e[7]=s("div",{class:"col-sm-6"},[s("h2",{class:"mt-2"},"CREATE NEW PRODUCT")],-1)),s("div",ae,[s("ol",re,[s("li",le,[s("a",{href:a.route("admin.dashboard")},"Home",8,de)]),s("li",ie,[s("a",{href:a.route("admin.products")},"Product",8,ne)]),e[6]||(e[6]=s("li",{class:"breadcrumb-item active"}," Create Product",-1))])])]),s("div",ce,[s("div",ue,[s("div",ve,[e[21]||(e[21]=s("div",{class:"card-header card-header-background"},[s("h3",{class:"card-title"},"Create New Product"),s("div",{class:"card-tools"},[s("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[s("i",{class:"fas fa-minus"})]),s("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[s("i",{class:"fas fa-times"})])])],-1)),s("div",me,[s("form",{class:"needs-validation",ref_key:"formRef",ref:f,onSubmit:se(A,["prevent"]),novalidate:""},[s("div",fe,[s("div",pe,[s("div",be,[s("div",ge,[e[8]||(e[8]=s("label",{for:"code"},"Product Code :",-1)),d(s("input",{type:"text",class:"form-control",id:"code",placeholder:"Enter Product Code","onUpdate:modelValue":e[0]||(e[0]=o=>t.value.code=o),required:""},null,512),[[v,t.value.code]]),e[9]||(e[9]=s("div",{class:"invalid-feedback"}," Please Provide Enter Product Code ",-1))])]),s("div",_e,[s("div",he,[e[10]||(e[10]=s("label",{for:"name"},"Product Name :",-1)),d(s("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Product Name","onUpdate:modelValue":e[1]||(e[1]=o=>t.value.name=o),required:""},null,512),[[v,t.value.name]]),e[11]||(e[11]=s("div",{class:"invalid-feedback"}," Please Provide Enter Product Name ",-1))])]),s("div",ye,[s("div",we,[e[13]||(e[13]=s("label",{for:"name"},"Product Category :",-1)),d(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.category_id=o),required:""},[e[12]||(e[12]=s("option",{value:"",disabled:""},"Select Category",-1)),(c(!0),m(q,null,M(_.value,o=>(c(),m("option",{key:o.id,value:o.id},T(o.name),9,Pe))),128))],512),[[B,t.value.category_id]]),e[14]||(e[14]=s("div",{class:"invalid-feedback"}," Please Provide Select Product Category ",-1))])]),s("div",Ce,[s("div",Ee,[e[16]||(e[16]=s("label",{for:"name"},"Product Brand :",-1)),d(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=o=>t.value.brand_id=o),required:""},[e[15]||(e[15]=s("option",{value:"",disabled:""},"Select Brand",-1)),(c(!0),m(q,null,M(h.value,o=>(c(),m("option",{key:o.id,value:o.id},T(o.name),9,ke))),128))],512),[[B,t.value.brand_id]])])])]),s("div",Ue,[s("div",Ve,[s("div",xe,[s("div",De,[e[19]||(e[19]=s("div",{class:"card-header"},[s("h5",{class:"card-title fw-bold"},"Prices (Rs.)")],-1)),s("div",Se,[s("div",Be,[s("div",Me,[d(s("input",{type:"number",class:"form-control",id:"cost_price",placeholder:"Enter  Cost Price","onUpdate:modelValue":e[4]||(e[4]=o=>t.value.cost=o),required:""},null,512),[[v,t.value.cost]]),e[17]||(e[17]=s("div",{class:"invalid-feedback"}," Please Provide Enter Cost Price ",-1))]),s("div",Te,[d(s("input",{type:"number",class:"form-control",id:"price",placeholder:"Enter  Price","onUpdate:modelValue":e[5]||(e[5]=o=>t.value.price=o),required:""},null,512),[[v,t.value.price]]),e[18]||(e[18]=s("div",{class:"invalid-feedback"}," Please Provide Enter Price ",-1))])])])])])])])]),e[20]||(e[20]=s("div",{class:"row"},[s("div",{class:"col-12 d-flex justify-content-end"},[s("button",{type:"submit",class:"btn btn-primary"},"Save")])],-1))],544)])])])])]),_:1}))}};export{We as default};
