import{_ as D}from"./AdminLayout-DxRoeMN4.js";import{D as x}from"./DeleteModel-C5VXcLeW.js";import{d as S,r as n,f as I,n as b,o as u,l as N,h as k,a as e,i as C,c as v,j as E,t as r,F as A,g as B}from"./app-C2i026LC.js";import"./index-BKeKyArJ.js";import{$ as m}from"./dataTables.bootstrap4.min-73PbsmZ0.js";import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const L={class:"row mb-2"},P={class:"col-sm-6"},$=["href"],F={class:"col-sm-6"},O={class:"breadcrumb float-sm-right mt-2"},j={class:"breadcrumb-item"},V=["href"],R={class:"row"},U={class:"col-12"},z={class:"card card-secondary"},H={class:"card-body"},X={id:"supplierTable",class:"table table-hover"},Y={class:"d-flex justify-content-center align-items-center"},q=["href"],G=["onClick"],oe={__name:"SupplierManagement",setup(J){const l=S(),i=n(!1),f=n(""),d=n(null);function _(s,t){d.value=s,f.value=t,i.value=!0}function T(){d.value&&(y(d.value),i.value=!1)}const y=s=>{axios.delete(`/suppliers/${s}`).then(t=>{var a,o;(a=t==null?void 0:t.data)!=null&&a.message?(l.warning(t.data.message),h()):(o=t==null?void 0:t.data)!=null&&o.error&&l.error(t.data.error)}).catch(t=>{var a,o,c,p;(o=(a=t.response)==null?void 0:a.data)!=null&&o.errors?Object.values(t.response.data.errors||{}).flat().forEach(w=>{l.error(w)}):(p=(c=t.response)==null?void 0:c.data)!=null&&p.message?l.error(t.response.data.message):l.error("An unexpected error occurred."),console.error(t)})};I(()=>{h().then(()=>{M()}),b(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})});const g=n([]),h=async()=>{try{const s=await axios.get("/suppliers");g.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}};function M(){b(()=>{m.fn.DataTable.isDataTable("#supplierTable")&&m("#supplierTable").DataTable().destroy(),m("#supplierTable").DataTable({responsive:!0,scrollX:!0,scrollY:"",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}return(s,t)=>(u(),N(D,null,{default:k(()=>[e("div",L,[e("div",P,[t[2]||(t[2]=e("h4",{class:"mt-2"},"SUPPLIER",-1)),e("a",{href:s.route("admin.create.supplier")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-primary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),C(" Add New Supplier")],-1)]),8,$)]),e("div",F,[e("ol",O,[e("li",j,[e("a",{href:s.route("admin.dashboard")},"Home",8,V)]),t[3]||(t[3]=e("li",{class:"breadcrumb-item active"},"Supplier",-1))])])]),e("div",R,[e("div",U,[e("div",z,[e("div",H,[t[7]||(t[7]=e("h6",{style:{"font-weight":"700"},class:""}," SUPPLIER TABLE",-1)),t[8]||(t[8]=e("hr",null,null,-1)),e("table",X,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",{width:"10%"},"First Name"),e("th",{width:"10%"},"Last Name"),e("th",null,"Email"),e("th",{width:"20%"},"Phone No"),e("th",{width:"40%"},"Address"),e("th",null,"NIC No"),e("th",{style:{"text-align":"center",width:"12%"}},"Action")])],-1)),e("tbody",null,[(u(!0),v(A,null,E(g.value,(a,o)=>(u(),v("tr",{key:a.id},[e("td",null,r(1+o),1),e("td",null,r(a.first_name),1),e("td",null,r(a.last_name),1),e("td",null,r(a.email),1),e("td",null,r(a.phone_number),1),e("td",null,r(a.address),1),e("td",null,r(a.nic_number),1),e("td",Y,[e("a",{href:s.route("suppliers.edit",a.id)},t[4]||(t[4]=[e("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,q),e("a",{onClick:c=>_(a.id,"Delete Supplier"),style:{cursor:"pointer"}},t[5]||(t[5]=[e("img",{src:"/images/icon/trash-bin.png",alt:"",width:"25px",height:"25px",class:"table-action-icon"},null,-1)]),8,G)])]))),128))])])])])])]),B(x,{isModalOpen:i.value,modalTitle:f.value,onClose:t[0]||(t[0]=a=>i.value=!1),onConfirmDelete:T},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{oe as default};
