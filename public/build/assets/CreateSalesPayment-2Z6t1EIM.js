import{Q as C,d as P,r,f as A,n as h,k as _,o,l as M,h as B,a as e,b as v,v as E,c as l,F as g,j as b,t as n,s as f,m as I,q as y}from"./app-C2i026LC.js";import{_ as N}from"./AdminLayout-DxRoeMN4.js";import{$ as w}from"./dataTables.bootstrap4.min-73PbsmZ0.js";/* empty css                       */import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"row mb-2"},$={class:"col-sm-6"},j={class:"breadcrumb float-sm-right mt-2"},L={class:"breadcrumb-item"},F=["href"],H={class:"row mb-4"},U={class:"col-12"},Y={class:"row d-flex justify-content-center"},q={class:"col-lg-3 col-12"},z={key:0,class:"search-result",id:"shopResult"},G={class:"shop-list"},Q=["onClick"],R={key:1,class:"search-result"},X={class:"col-lg-3 col-12"},J={class:"input-group mb-3"},K={class:"row mt-4"},O={class:"col-12"},W={class:"card card-primary"},Z={class:"card-body"},ee={id:"refTable",class:"table table-hover"},te={key:0,class:"badge badge-info"},se={key:1,class:"badge badge-warning"},ae={key:2,class:"badge badge-danger"},oe={key:3,class:"badge badge-success"},le={class:"justify-content-center align-items-center"},re=["href"],he={__name:"CreateSalesPayment",setup(ne){C();const S=P(),i=r(""),c=r(1),u=r(""),p=r(""),d=r([]);r(!1),A(()=>{h(()=>{k()})});const k=()=>{w("#perchesTable").DataTable({responsive:!0,scrollX:!0,scrollY:"",scrollCollapse:!0,paging:!0})};_(i,()=>{D(i.value)});const D=async a=>{try{const t=await y.get(`/admin/search/shop/${a}`);d.value=t.data}catch(t){t.response&&t.response.status===404?console.log(t.response.data.message):console.error("An error occurred:",t)}};function x(a,t){u.value=a,i.value=t,d.value=[]}_([c,u],([a,t])=>{T(a,t)});const T=async(a,t)=>{if(!t)S.warning("Please select a shop");else try{const s=await y.get(route("get.sales.payment.data",{paymentStatus:a,searchShop:t}));p.value=s.data,console.log(s),h(()=>{w("#perchesTable").DataTable().clear().rows.add(s.data).draw()})}catch(s){console.error("Error fetching data table:",s)}};return(a,t)=>(o(),M(N,null,{default:B(()=>[e("div",V,[t[3]||(t[3]=e("div",{class:"col-sm-6"},[e("h4",{class:"mt-2"},"SALES PAYMENTS")],-1)),e("div",$,[e("ol",j,[e("li",L,[e("a",{href:a.route("admin.dashboard")},"Home",8,F)]),t[2]||(t[2]=e("li",{class:"breadcrumb-item active"},"Sales Payments",-1))])])]),e("div",H,[e("div",U,[e("div",Y,[e("div",q,[v(e("input",{class:"form-control",type:"text",placeholder:"Search Shop...","aria-label":"default input example","onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s)},null,512),[[E,i.value]]),i.value&&d.value.length>0?(o(),l("div",z,[e("ol",G,[(o(!0),l(g,null,b(d.value,s=>(o(),l("li",{key:s.id,class:"product-item",style:{cursor:"pointer"},onClick:m=>x(s.id,s.name)},n(s.name)+" - "+n(s.address),9,Q))),128))])])):a.searched_shop&&d.value.length===0?(o(),l("div",R,t[4]||(t[4]=[e("p",null,"No shops found...",-1)]))):f("",!0)]),e("div",X,[e("div",J,[t[6]||(t[6]=e("label",{class:"input-group-text",for:"inputGroupSelect01"},[e("img",{src:"/images/icon/sales_payments.svg",alt:"",width:"20px"})],-1)),v(e("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s)},t[5]||(t[5]=[e("option",{value:"1"},"All",-1),e("option",{value:"2"},"Pending",-1),e("option",{value:"3"},"Completed",-1)]),512),[[I,c.value]])])])])])]),e("div",K,[e("div",O,[e("div",W,[t[9]||(t[9]=e("div",{class:"card-header card-header-background"},[e("h3",{class:"card-title"},"Sales Payment Details")],-1)),e("div",Z,[e("table",ee,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{style:{}},"ID"),e("th",{style:{}},"Invoice ID"),e("th",{style:{}},"Created At"),e("th",{style:{}},"Paid Amount"),e("th",{style:{}},"Credit Amount"),e("th",{style:{}},"Status"),e("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),e("tbody",null,[(o(!0),l(g,null,b(p.value.sales,(s,m)=>(o(),l("tr",{key:r.id},[e("td",null,n(1+m),1),e("td",null,"MH"+n(s.id),1),e("td",null,n(new Date(s.created_at).toLocaleDateString()),1),e("td",null,n(s.received_amount),1),e("td",null,n(s.total_price-s.received_amount),1),e("td",null,[s.order_status==="1"?(o(),l("span",te,"Start to Print")):s.order_status==="2"?(o(),l("span",se,"Print")):s.order_status==="3"?(o(),l("span",ae,"Delivered")):s.order_status==="4"?(o(),l("span",oe,"Completed")):f("",!0)]),e("td",le,[e("a",{href:a.route("get.shop.payment.data",s.id)},t[7]||(t[7]=[e("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,re)])]))),128))])])])])])])]),_:1}))}};export{he as default};
