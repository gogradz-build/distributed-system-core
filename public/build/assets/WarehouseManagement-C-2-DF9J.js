import{d as O,r,f as A,n as p,q as m,o as w,l as B,h as F,a,w as x,b as L,v as R,c as E,j as V,t as k,F as H,g as U}from"./app-C2i026LC.js";import{_ as j}from"./AdminLayout-DxRoeMN4.js";import{D as q}from"./DeleteModel-C5VXcLeW.js";import{$ as i}from"./dataTables.bootstrap4.min-73PbsmZ0.js";import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const P={class:"row mb-2"},z={class:"col-sm-6"},X={class:"breadcrumb float-sm-right mt-2"},G={class:"breadcrumb-item"},J=["href"],K={class:"row"},Q={class:"col-12"},Y={class:"card card-secondary"},Z={class:"card-body"},ee={class:"row"},ae={class:"col-lg-6"},te={class:"form-group"},se={class:"row"},le={class:"col-12"},oe={class:"card card-secondary"},re={class:"card-body"},ie={id:"warehouseTable",class:"table table-hover"},de={class:"text-center"},ne=["onClick"],ce=["onClick"],_e={__name:"WarehouseManagement",setup(ue){const o=O(),v=r(!1),f=r(null),d=r({name:""}),n=r(null),c=r(!1),T=r(""),h=r(null);function W(t,e){h.value=t,T.value=e,c.value=!0}function S(){h.value&&(C(h.value),c.value=!1)}const C=t=>{m.delete(`/warehouses/${t}`).then(e=>{var s,l;(s=e==null?void 0:e.data)!=null&&s.message?(o.warning(e.data.message),i.fn.DataTable.isDataTable("#warehouseTable")&&(i("#warehouseTable").DataTable().destroy(),b().then(()=>{g()}))):(l=e==null?void 0:e.data)!=null&&l.error&&o.error(e.data.error)}).catch(e=>{var s,l,u,M;(l=(s=e.response)==null?void 0:s.data)!=null&&l.errors?Object.values(e.response.data.errors||{}).flat().forEach($=>{o.error($)}):(M=(u=e.response)==null?void 0:u.data)!=null&&M.message?o.error(e.response.data.message):o.error("An unexpected error occurred."),console.error(e)})},I=t=>{if(t.preventDefault(),!n.value.checkValidity()){n.value.classList.add("was-validated");return}v.value?m.put(`/warehouses/${f.value}`,d.value).then(e=>{var s,l;(s=e==null?void 0:e.data)!=null&&s.message?(o.success(e.data.message),_(),y()):(l=e==null?void 0:e.data)!=null&&l.error&&o.error(e.data.error)}).catch(handleError):m.post("/warehouses",d.value).then(e=>{var s,l;(s=e==null?void 0:e.data)!=null&&s.message?(o.success(e.data.message),_(),y()):(l=e==null?void 0:e.data)!=null&&l.error&&o.error(e.data.error)}).catch(handleError)},N=t=>{d.value.name=t.name,f.value=t.id,v.value=!0};A(()=>{b().then(()=>{g()}),p(()=>{const t=localStorage.getItem("successMessage");t&&(o.success(t),localStorage.removeItem("successMessage"))})});const _=()=>{d.value.name="",v.value=!1,f.value=null,n.value.classList.remove("was-validated")},y=()=>{i.fn.DataTable.isDataTable("#warehouseTable")&&(i("#warehouseTable").DataTable().destroy(),b().then(()=>{g()}))},D=r([]),b=async()=>{try{const t=await m.get("/warehouses");D.value=t.data}catch(t){console.error("Error fetching courses:",t)}};function g(){p(()=>{i.fn.DataTable.isDataTable("#warehouseTable")&&i("#warehouseTable").DataTable().destroy(),i("#warehouseTable").DataTable({responsive:!0,scrollX:!0,scrollCollapse:!0,paging:!0});const t=localStorage.getItem("successMessage");t&&(o.success(t),localStorage.removeItem("successMessage"))})}return(t,e)=>(w(),B(j,null,{default:F(()=>[a("div",P,[e[3]||(e[3]=a("div",{class:"col-sm-6"},[a("h4",{class:"mt-2"},"WAREHOUSE")],-1)),a("div",z,[a("ol",X,[a("li",G,[a("a",{href:t.route("admin.dashboard")},"Home",8,J)]),e[2]||(e[2]=a("li",{class:"breadcrumb-item active"},"Warehouse",-1))])])]),a("div",K,[a("div",Q,[a("div",Y,[e[7]||(e[7]=a("div",{class:"card-header card-header-background"},[a("h3",{class:"card-title"},"Create New Warehouse"),a("div",{class:"card-tools"},[a("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[a("i",{class:"fas fa-minus"})]),a("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[a("i",{class:"fas fa-times"})])])],-1)),a("div",Z,[a("form",{class:"needs-validation",ref_key:"formRef",ref:n,onSubmit:x(I,["prevent"]),novalidate:""},[a("div",ee,[a("div",ae,[a("div",te,[e[4]||(e[4]=a("label",{for:"warehouse-name"},"Warehouse Name :",-1)),L(a("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Warehouse Name","onUpdate:modelValue":e[0]||(e[0]=s=>d.value.name=s),required:""},null,512),[[R,d.value.name]]),e[5]||(e[5]=a("div",{class:"invalid-feedback"}," Please Provide Enter Warehouse Name ",-1))])]),e[6]||(e[6]=a("div",{class:"col-lg-6 mt-2"},[a("button",{type:"submit ",class:"btn btn-primary mt-4 category-btn"},"Save")],-1))])],544)])])])]),a("div",se,[a("div",le,[a("div",oe,[a("div",re,[e[11]||(e[11]=a("h6",{style:{"font-weight":"700"},class:""},"WAREHOUSE TABLE",-1)),e[12]||(e[12]=a("hr",null,null,-1)),a("table",ie,[e[10]||(e[10]=a("thead",null,[a("tr",null,[a("th",{width:"100px"},"Warehouses ID"),a("th",{width:"85%"},"Warehouses Name"),a("th",{width:"20%",style:{"text-align":"center"}},"Action")])],-1)),a("tbody",null,[(w(!0),E(H,null,V(D.value,(s,l)=>(w(),E("tr",{key:s.id},[a("td",null,k(1+l),1),a("td",null,k(s.name),1),a("td",de,[a("a",{href:"#",onClick:x(u=>N(s),["prevent"])},e[8]||(e[8]=[a("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,ne),a("a",{onClick:u=>W(s.id,"Delete Warehouse"),style:{cursor:"pointer"}},e[9]||(e[9]=[a("img",{src:"/images/icon/trash-bin.png",alt:"",width:"25px",height:"25px",class:"table-action-icon"},null,-1)]),8,ce)])]))),128))])])])])])]),U(q,{isModalOpen:c.value,modalTitle:T.value,onClose:e[1]||(e[1]=s=>c.value=!1),onConfirmDelete:S},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{_e as default};
