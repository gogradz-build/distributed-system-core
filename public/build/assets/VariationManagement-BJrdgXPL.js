import{d as R,r as n,f as $,n as D,k as B,q as V,o as f,l as j,h as P,a as e,i as q,w as L,b as M,v as k,c as b,j as x,F as C,t as _,g as U}from"./app-DuMmWb0e.js";import{_ as z}from"./AdminLayout-CuGKItQZ.js";import{D as H}from"./DeleteModel-Bb8bUFVd.js";import{$ as d}from"./dataTables.bootstrap4.min-Db9EHKM2.js";import"./AdminFooter-i6V7ulTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const X={class:"row mb-2"},Y={class:"col-sm-6"},G={class:"breadcrumb float-sm-right mt-2"},J={class:"breadcrumb-item"},K=["href"],Q={class:"row"},W={class:"col-12"},Z={class:"card card-secondary"},aa={class:"card-body"},ea={class:"row"},ta={class:"col-6"},sa={class:"form-group"},oa={class:"col-lg-6 mt-3"},la={class:"col-10 mt-3"},ra=["onUpdate:modelValue"],ia={class:"col-2"},na=["onClick"],da={class:"row"},ca={class:"col-12"},ua={class:"card card-secondary"},fa={class:"card-body"},ma={id:"VariationTable",class:"table table-hover",style:{width:"100%"}},va={class:"text-center"},ba=["onClick"],Ma={__name:"VariationManagement",setup(ga){const l=R();n([]);const i=n({name:"",values:[]}),g=n(null),c=n([]),m=n(!1),w=n(""),y=n(null);$(()=>{h().then(()=>{p()}),D(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}),B(c,()=>{console.log("ok")});function p(){D(()=>{d.fn.DataTable.isDataTable("#VariationTable")&&d("#VariationTable").DataTable().destroy(),d("#VariationTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}const h=async()=>{try{const s=await V.get("/variations");c.value=s.data,console.log(s)}catch(s){console.error("Error fetching variation type:",s)}},A=s=>{if(s.preventDefault(),!g.value.checkValidity()){g.value.classList.add("was-validated");return}V.post("/variations",i.value).then(a=>{var t,o;(t=a==null?void 0:a.data)!=null&&t.message?(l.success(a.data.message),i.value.name="",i.value.values=[],d.fn.DataTable.isDataTable("#VariationTable")&&(d("#VariationTable").DataTable().destroy(),h().then(()=>{p()}))):(o=a==null?void 0:a.data)!=null&&o.error&&l.error(a.data.error)}).catch(a=>{var t,o,r,u,T,v;(o=(t=a.response)==null?void 0:t.data)!=null&&o.errors?Object.values(a.response.data.errors||{}).flat().forEach(O=>{l.error(O)}):(u=(r=a.response)==null?void 0:r.data)!=null&&u.message?l.error(a.response.data.message):(v=(T=a.response)==null?void 0:T.data)!=null&&v.error?l.error(a.response.data.error):l.error("An unexpected error occurred."),console.error(a)})},E=s=>{V.delete(`/variations/${s}`).then(a=>{var t,o;(t=a==null?void 0:a.data)!=null&&t.message?(l.warning(a.data.message),c.value=c.value.filter(r=>r.id!==s),d.fn.DataTable.isDataTable("#VariationTable")&&(d("#VariationTable").DataTable().destroy(),h().then(()=>{p()}))):(o=a==null?void 0:a.data)!=null&&o.error&&l.error(a.data.error)}).catch(a=>{var t,o,r,u;(o=(t=a.response)==null?void 0:t.data)!=null&&o.errors?Object.values(a.response.data.errors||{}).flat().forEach(v=>{l.error(v)}):(u=(r=a.response)==null?void 0:r.data)!=null&&u.message?l.error(a.response.data.message):l.error("An unexpected error occurred."),console.error(a)})},I=()=>{console.log(i.value.values),i.value.values.push({value:""})},N=s=>{i.value.values.splice(s,1),console.log(i.value.values)};function S(s,a){y.value=s,w.value=a,m.value=!0}function F(){y.value&&(E(y.value),m.value=!1)}return(s,a)=>(f(),j(z,null,{default:P(()=>[e("div",X,[a[3]||(a[3]=e("div",{class:"col-sm-6"},[e("h2",{class:"mt-2"},"VARIATION"),e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[e("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),q("Variation Report")])],-1)),e("div",Y,[e("ol",G,[e("li",J,[e("a",{href:s.route("admin.dashboard")},"Home",8,K)]),a[2]||(a[2]=e("li",{class:"breadcrumb-item active"},"Variation",-1))])])]),e("div",Q,[e("div",W,[e("div",Z,[a[8]||(a[8]=e("div",{class:"card-header card-header-background"},[e("h3",{class:"card-title"},"Create New Variation"),e("div",{class:"card-tools"},[e("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[e("i",{class:"fas fa-minus"})]),e("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[e("i",{class:"fas fa-times"})])])],-1)),e("div",aa,[e("form",{class:"needs-validation",ref_key:"formRef",ref:g,onSubmit:L(A,["prevent"]),novalidate:""},[e("div",ea,[e("div",ta,[e("div",sa,[a[4]||(a[4]=e("label",{for:"Variation-name"},"Variation Name :",-1)),M(e("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Variation Name","onUpdate:modelValue":a[0]||(a[0]=t=>i.value.name=t),required:""},null,512),[[k,i.value.name]]),a[5]||(a[5]=e("div",{class:"invalid-feedback"}," Please Provide Enter Variation Name ",-1))])]),e("div",oa,[(f(!0),b(C,null,x(i.value.values,(t,o)=>(f(),b("div",{class:"row",key:o},[e("div",la,[M(e("input",{type:"text",class:"form-control",placeholder:"Enter Variation Type","onUpdate:modelValue":r=>t.value=r,required:""},null,8,ra),[[k,t.value]]),a[6]||(a[6]=e("div",{class:"invalid-feedback"}," Please Provide Enter Variation Type ",-1))]),e("div",ia,[e("button",{type:"button",class:"btn btn-danger mt-3",onClick:r=>N(o)},"Remove",8,na)])]))),128))]),e("div",{class:"col-lg-12 d-flex justify-content-end"},[e("button",{type:"button",class:"btn btn-secondary mt-4 mr-2",onClick:I},"Add Values to Variation Type"),a[7]||(a[7]=e("button",{type:"submit",class:"btn btn-primary mt-4 category-btn"},"Save",-1))])])],544)])])])]),e("div",da,[e("div",ca,[e("div",ua,[e("div",fa,[a[13]||(a[13]=e("h6",{style:{"font-weight":"700"},class:""}," VARIATIONS TABLE",-1)),a[14]||(a[14]=e("hr",null,null,-1)),e("table",ma,[a[12]||(a[12]=e("thead",null,[e("tr",null,[e("th",{style:{width:"20%"}},"ID"),e("th",{style:{width:"40%"}},"Variation Type"),e("th",{style:{width:"20%"}},"Values"),e("th",{style:{"text-align":"center",width:"30%"}},"Action")])],-1)),e("tbody",null,[(f(!0),b(C,null,x(c.value,(t,o)=>(f(),b("tr",{key:t.id},[e("td",null,_(1+o),1),e("td",null,_(t.variation_name),1),e("td",null,_(t.variation_types),1),e("td",va,[a[10]||(a[10]=e("a",{href:""},[e("i",{class:"fas fa-regular fa-eye mr-4",style:{color:"#0a7c46"}})],-1)),a[11]||(a[11]=e("a",{href:""},[e("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),e("a",{onClick:r=>S(t.variation_id,"Delete Variation"),style:{cursor:"pointer"}},a[9]||(a[9]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,ba)])]))),128))])])])])])]),U(H,{isModalOpen:m.value,modalTitle:w.value,onClose:a[1]||(a[1]=t=>m.value=!1),onConfirmDelete:F},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{Ma as default};
