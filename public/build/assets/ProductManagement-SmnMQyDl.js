import{_ as M}from"./AdminLayout-CuGKItQZ.js";import{D as x}from"./DeleteModel-Bb8bUFVd.js";import{d as C,r as c,f as P,n as v,o as u,l as k,h as S,a as t,i as B,c as y,j as N,t as r,F as O,g as A}from"./app-DuMmWb0e.js";import"./index-C4SQfzFt.js";import{$ as m}from"./dataTables.bootstrap4.min-Db9EHKM2.js";import"./AdminFooter-i6V7ulTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const $={class:"row mb-2"},E={class:"col-sm-6"},I=["href"],j={class:"col-sm-6"},F={class:"breadcrumb float-sm-right mt-2"},L={class:"breadcrumb-item"},R=["href"],V={class:"row"},U={class:"col-12"},q={class:"card card-secondary"},z={class:"card-body"},H={id:"productTable",class:"table table-hover"},Q={class:"justify-content-center align-items-center"},X=["href"],G=["onClick"],ot={__name:"ProductManagement",setup(J){const l=C(),n=c(!1),f=c(""),d=c(null);function _(s,e){d.value=s,f.value=e,n.value=!0}function w(){d.value&&(p(d.value),n.value=!1)}const p=s=>{console.log(s),axios.delete(`/products/${s}`).then(e=>{var a,o,i;(a=e==null?void 0:e.data)!=null&&a.message?(l.warning(e.data.message),h()):(o=e==null?void 0:e.data)!=null&&o.warning?l.warning(e.data.warning):(i=e==null?void 0:e.data)!=null&&i.error&&l.error(e.data.error)}).catch(e=>{var a,o,i,b;(o=(a=e.response)==null?void 0:a.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(D=>{l.error(D)}):(b=(i=e.response)==null?void 0:i.data)!=null&&b.message?l.error(e.response.data.message):l.error("An unexpected error occurred."),console.error(e)})};P(()=>{h().then(()=>{T()}),v(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})});const g=c([]),h=async()=>{try{const s=await axios.get("/products");g.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}};function T(){v(()=>{m.fn.DataTable.isDataTable("#productTable")&&m("#productTable").DataTable().destroy(),m("#productTable").DataTable({responsive:!0,scrollX:!0,scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}return(s,e)=>(u(),k(M,null,{default:S(()=>[t("div",$,[t("div",E,[e[2]||(e[2]=t("h4",{class:"mt-2"},"PRODUCTS",-1)),t("a",{href:s.route("admin.create.products")},e[1]||(e[1]=[t("button",{type:"button",class:"btn btn-primary mt-4 mb-4 mr-2"},[t("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),B(" Add New Product")],-1)]),8,I)]),t("div",j,[t("ol",F,[t("li",L,[t("a",{href:s.route("admin.dashboard")},"Home",8,R)]),e[3]||(e[3]=t("li",{class:"breadcrumb-item active"},"Products",-1))])])]),t("div",V,[t("div",U,[t("div",q,[t("div",z,[e[7]||(e[7]=t("h6",{style:{"font-weight":"700"},class:""},"PRODUCT TABLE",-1)),e[8]||(e[8]=t("hr",null,null,-1)),t("table",H,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",{style:{width:"8%"}},"#"),t("th",{style:{width:"8%"}},"Product Code"),t("th",{style:{width:"40%"}},"Product Name"),t("th",{style:{width:"10%"}},"Brand Name"),t("th",{style:{width:"10%"}},"Price (Rs.)"),t("th",{style:{width:"10%"}},"Quantity"),t("th",{style:{width:"10%"}},"Create At"),t("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),t("tbody",null,[(u(!0),y(O,null,N(g.value,(a,o)=>(u(),y("tr",{key:a.id},[t("td",null,r(1+o),1),t("td",null,r(a.code),1),t("td",null,r(a.name),1),t("td",null,r(a.brand.name),1),t("td",null,r(a.price),1),t("td",null,r(a.warehouse_stocks.length>0?a.warehouse_stocks[0].quantity:0),1),t("td",null,r(new Date(a.created_at).toLocaleDateString()),1),t("td",Q,[t("a",{href:s.route("products.edit",a.id)},e[4]||(e[4]=[t("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,X),t("a",{onClick:i=>_(a.id,"Delete Product"),style:{cursor:"pointer"}},e[5]||(e[5]=[t("img",{src:"/images/icon/trash-bin.png",alt:"",width:"25px",height:"25px",class:"table-action-icon"},null,-1)]),8,G)])]))),128))])])])])])]),A(x,{isModalOpen:n.value,modalTitle:f.value,onClose:e[0]||(e[0]=a=>n.value=!1),onConfirmDelete:w},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ot as default};
