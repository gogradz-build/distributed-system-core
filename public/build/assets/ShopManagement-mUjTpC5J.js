import{_ as S}from"./AdminLayout-CuGKItQZ.js";import{D}from"./DeleteModel-Bb8bUFVd.js";import{d as x,r as i,f as A,n as p,o as u,l as N,h as k,a as e,i as O,c as v,j as C,t as a,F as I,g as B}from"./app-DuMmWb0e.js";import"./index-C4SQfzFt.js";import{$ as m}from"./dataTables.bootstrap4.min-Db9EHKM2.js";import"./AdminFooter-i6V7ulTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const E={class:"row mb-2"},$={class:"col-sm-6"},j=["href"],F={class:"col-sm-6"},H={class:"breadcrumb float-sm-right mt-2"},R={class:"breadcrumb-item"},V=["href"],L={class:"row"},P={class:"col-12"},z={class:"card card-secondary"},X={class:"card-body"},q={id:"shopTable",class:"table table-hover"},G={class:"justify-content-center align-items-center",style:{textAlign:"center",verticalAlign:"middle"}},J=["href"],K=["onClick"],oe={__name:"ShopManagement",setup(Q){const o=x(),n=i(!1),f=i(""),d=i(null);function _(s,t){d.value=s,f.value=t,n.value=!0}function y(){d.value&&(T(d.value),n.value=!1)}const T=s=>{axios.delete(`/shops/${s}`).then(t=>{var l,r;(l=t==null?void 0:t.data)!=null&&l.message?(o.warning(t.data.message),g()):(r=t==null?void 0:t.data)!=null&&r.error&&o.error(t.data.error)}).catch(t=>{var l,r,c,b;(r=(l=t.response)==null?void 0:l.data)!=null&&r.errors?Object.values(t.response.data.errors||{}).flat().forEach(w=>{o.error(w)}):(b=(c=t.response)==null?void 0:c.data)!=null&&b.message?o.error(t.response.data.message):o.error("An unexpected error occurred."),console.error(t)})};A(()=>{g().then(()=>{M()}),p(()=>{const s=localStorage.getItem("successMessage");s&&(o.success(s),localStorage.removeItem("successMessage"))})});const h=i([]),g=async()=>{try{const s=await axios.get("/shops");h.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}};function M(){p(()=>{m.fn.DataTable.isDataTable("#shopTable")&&m("#shopTable").DataTable().destroy(),m("#shopTable").DataTable({responsive:!0,scrollX:!0,scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(o.success(s),localStorage.removeItem("successMessage"))})}return(s,t)=>(u(),N(S,null,{default:k(()=>[e("div",E,[e("div",$,[t[2]||(t[2]=e("h4",{class:"mt-2"},"SHOP",-1)),e("a",{href:s.route("admin.create.shop")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-primary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),O(" Add New Shop")],-1)]),8,j)]),e("div",F,[e("ol",H,[e("li",R,[e("a",{href:s.route("admin.dashboard")},"Home",8,V)]),t[3]||(t[3]=e("li",{class:"breadcrumb-item active"},"Shop",-1))])])]),e("div",L,[e("div",P,[e("div",z,[e("div",X,[t[7]||(t[7]=e("h6",{style:{"font-weight":"700"},class:""},"SHOPS TABLE",-1)),t[8]||(t[8]=e("hr",null,null,-1)),e("table",q,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",{style:{width:"25%"}},"Shop Name"),e("th",null,"Owner Name"),e("th",null,"Mobile"),e("th",null,"Tel No"),e("th",{style:{width:"20%"}},"credit limit (.Rs)"),e("th",{style:{width:"20%"}},"credit (.RS)"),e("th",null,"Address"),e("th",null,"Email"),e("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),e("tbody",null,[(u(!0),v(I,null,C(h.value,(l,r)=>(u(),v("tr",{key:l.id},[e("td",null,a(1+r),1),e("td",null,a(l.name),1),e("td",null,a(l.owner_name),1),e("td",null,a(l.contact??"N/A"),1),e("td",null,a(l.telephone_number??"N/A"),1),e("td",null,a(l.credit_limit),1),e("td",null,a(l.credit??"N/A"),1),e("td",null,a(l.address),1),e("td",null,a(l.email??"N/A"),1),e("td",G,[e("a",{href:s.route("shops.edit",l.id)},t[4]||(t[4]=[e("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,J),e("a",{onClick:c=>_(l.id,"Delete Shop"),style:{cursor:"pointer"}},t[5]||(t[5]=[e("img",{src:"/images/icon/trash-bin.png",alt:"",width:"25px",height:"25px",class:"table-action-icon"},null,-1)]),8,K)])]))),128))])])])])])]),B(D,{isModalOpen:n.value,modalTitle:f.value,onClose:t[0]||(t[0]=l=>n.value=!1),onConfirmDelete:y},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{oe as default};
