import{_ as M}from"./AdminLayout-DxRoeMN4.js";import{D as x}from"./DeleteModel-C5VXcLeW.js";import{d as C,r as d,f as S,n as _,o as i,l as A,h as P,a as e,i as k,c as n,j as N,t as o,s as m,F as E,g as I}from"./app-C2i026LC.js";import"./index-BKeKyArJ.js";import{$ as h}from"./dataTables.bootstrap4.min-73PbsmZ0.js";import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const B={class:"row mb-2"},O={class:"col-sm-6"},V=["href"],$={class:"col-sm-6"},j={class:"breadcrumb float-sm-right mt-2"},F={class:"breadcrumb-item"},H=["href"],L={class:"row"},R={class:"col-12"},U={class:"card card-secondary"},z={class:"card-body"},W={id:"purchaseTable",class:"table table-hover"},X={key:0,class:"badge badge-success"},Y={key:1,class:"badge badge-info"},q={key:2,class:"badge badge-warning"},G={class:"d-flex justify-content-center align-items-center"},J=["href"],K=["href"],ne={__name:"PerchesManagement",setup(Q){const l=C(),c=d(!1),y=d(""),f=d(null);function v(){f.value&&(w(f.value),c.value=!1)}const w=a=>{axios.delete(`/purchases/${a}`).then(t=>{var s,r;(s=t==null?void 0:t.data)!=null&&s.message?(l.warning(t.data.message),g()):(r=t==null?void 0:t.data)!=null&&r.error&&l.error(t.data.error)}).catch(t=>{var s,r,p,b;(r=(s=t.response)==null?void 0:s.data)!=null&&r.errors?Object.values(t.response.data.errors||{}).flat().forEach(D=>{l.error(D)}):(b=(p=t.response)==null?void 0:p.data)!=null&&b.message?l.error(t.response.data.message):l.error("An unexpected error occurred."),console.error(t)})};S(()=>{g().then(()=>{T()}),_(()=>{const a=localStorage.getItem("successMessage");a&&(l.success(a),localStorage.removeItem("successMessage"))})});const u=d([]),g=async()=>{try{const a=await axios.get("/purchases");u.value=a.data,console.log(a)}catch(a){console.error("Error fetching courses:",a)}};function T(){_(()=>{h.fn.DataTable.isDataTable("#purchaseTable")&&h("#purchaseTable").DataTable().destroy(),h("#purchaseTable").DataTable({responsive:!0,scrollX:!0,scrollY:"",scrollCollapse:!0,paging:!0});const a=localStorage.getItem("successMessage");a&&(l.success(a),localStorage.removeItem("successMessage"))})}return(a,t)=>(i(),A(M,null,{default:P(()=>[e("div",B,[e("div",O,[t[2]||(t[2]=e("h4",{class:"mt-2"},"PURCHASE",-1)),e("a",{href:a.route("admin.create.perches")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-primary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),k(" Add New Purchase")],-1)]),8,V)]),e("div",$,[e("ol",j,[e("li",F,[e("a",{href:a.route("admin.dashboard")},"Home",8,H)]),t[3]||(t[3]=e("li",{class:"breadcrumb-item active"},"Purchase",-1))])])]),e("div",L,[e("div",R,[e("div",U,[e("div",z,[t[7]||(t[7]=e("h6",{style:{"font-weight":"700"},class:""},"PURCHASE TABLE",-1)),t[8]||(t[8]=e("hr",null,null,-1)),e("table",W,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"}},"ID"),e("th",{style:{width:"20%"}},"Purchase Code"),e("th",{style:{width:"20%"}},"Supplier Name"),e("th",{style:{width:"20%"}},"Warehouse Name"),e("th",{style:{width:"10%"}},"Paid Amount"),e("th",{style:{width:"15%"}},"Payment Status"),e("th",{style:{width:"25%"}},"Create At"),e("th",{style:{width:"10%"}},"Action")])],-1)),e("tbody",null,[(i(!0),n(E,null,N(u.value,(s,r)=>(i(),n("tr",{key:u.value.id},[e("td",null,o(s.id),1),e("td",null,o(s.purchase_code??"N/A"),1),e("td",null,o(s.supplier.first_name)+" "+o(s.supplier.last_name),1),e("td",null,o(s.warehouse.name),1),e("td",null,o(s.received_amount),1),e("td",null,[s.payment_status===1?(i(),n("span",X,"Cash")):m("",!0),s.payment_status===2?(i(),n("span",Y,"partially paid")):m("",!0),s.payment_status===3?(i(),n("span",q,"Credit")):m("",!0)]),e("td",null,o(new Date(s.created_at).toLocaleDateString()),1),e("td",G,[e("a",{href:a.route("admin.create.perches.return",s.id)},t[4]||(t[4]=[e("img",{src:"/images/icon/return_icon.png",width:"24px",height:"24px",style:{"margin-right":"10px"},alt:"",class:"table-action-icon"},null,-1)]),8,J),e("a",{href:a.route("purchases.edit",s.id)},t[5]||(t[5]=[e("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,K)])]))),128))])])])])])]),I(x,{isModalOpen:c.value,modalTitle:y.value,onClose:t[0]||(t[0]=s=>c.value=!1),onConfirmDelete:v},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ne as default};
