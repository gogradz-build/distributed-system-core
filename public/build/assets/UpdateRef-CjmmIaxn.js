import{d as g,r as v,f as _,n as E,o as h,l as N,h as P,a as t,w as y,b as l,v as o}from"./app-DuMmWb0e.js";import{_ as w}from"./AdminLayout-CuGKItQZ.js";import"./index-C4SQfzFt.js";import"./dataTables.bootstrap4.min-Db9EHKM2.js";import"./AdminFooter-i6V7ulTS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"row mb-2"},D={class:"col-sm-6"},k={class:"breadcrumb float-sm-right mt-2"},x={class:"breadcrumb-item"},I=["href"],R={class:"breadcrumb-item"},U=["href"],A={class:"row"},q={class:"col-12"},C={class:"card card-secondary"},L={class:"card-body"},M={class:"row"},B={class:"col-lg-6"},S={class:"form-group"},$={class:"col-lg-6"},F={class:"form-group"},T={class:"row"},j={class:"col-lg-6"},X={class:"form-group"},z={class:"form-group col-md-6"},H={class:"form-row"},O={class:"col-lg-6"},G={class:"form-group"},J={class:"form-group col-lg-6"},K={class:"form-row"},Q={class:"col-lg-6"},W={class:"form-group"},le={__name:"UpdateRef",props:{refData:Array},setup(c){const u=g(),f=v(null),r=c,a=v({first_name:r.refData.first_name,last_name:r.refData.last_name,phone_number:r.refData.phone_number,address:r.refData.address,email:r.refData.email,nic_number:r.refData.nic_number,register_number:r.refData.register_number}),b=d=>{if(d.preventDefault(),!f.value.checkValidity()){f.value.classList.add("was-validated");return}axios.put(`/refs/${r.refData.id}`,a.value).then(e=>{var s,i;(s=e==null?void 0:e.data)!=null&&s.message?(localStorage.setItem("successMessage",e.data.message),window.location.href=route("admin.show.ref")):(i=e==null?void 0:e.data)!=null&&i.error&&u.error(e.data.error)}).catch(e=>{var s,i,n,m;(i=(s=e.response)==null?void 0:s.data)!=null&&i.errors?Object.values(e.response.data.errors||{}).flat().forEach(p=>{u.error(p)}):(m=(n=e.response)==null?void 0:n.data)!=null&&m.message?u.error(e.response.data.message):u.error("An unexpected error occurred."),console.error(e)})};return _(()=>{E(()=>{document.getElementById("phone-number").addEventListener("input",s=>{s.target.value=s.target.value.replace(/\D/g,""),s.target.value.length>10&&(s.target.value=s.target.value.slice(0,10))});const e=document.getElementById("nic-number");e.addEventListener("input",s=>{const n=s.target.value.replace(/[^0-9VvXx]/g,"");s.target.value=n;const m=/^\d{9}[VvXx]$|^\d{12}$/.test(n);e.setCustomValidity(m?"":"Invalid NIC number")})})}),(d,e)=>(h(),N(w,null,{default:P(()=>[t("div",V,[e[8]||(e[8]=t("div",{class:"col-sm-6"},[t("h4",{class:"mt-2"},"UPDATE REF")],-1)),t("div",D,[t("ol",k,[t("li",x,[t("a",{href:d.route("admin.dashboard")},"Home",8,I)]),t("li",R,[t("a",{href:d.route("admin.show.ref")},"Sales Ref",8,U)]),e[7]||(e[7]=t("li",{class:"breadcrumb-item active"},"Update Ref",-1))])])]),t("div",A,[t("div",q,[t("div",C,[e[24]||(e[24]=t("div",{class:"card-header card-header-background"},[t("h3",{class:"card-title"},"Personal Ref Details"),t("div",{class:"card-tools"},[t("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[t("i",{class:"fas fa-minus"})]),t("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[t("i",{class:"fas fa-times"})])])],-1)),t("div",L,[t("form",{class:"needs-validation",ref_key:"formRef",ref:f,onSubmit:y(b,["prevent"]),novalidate:""},[t("div",M,[t("div",B,[t("div",S,[e[9]||(e[9]=t("label",{for:"first-name"},"First Name :",-1)),l(t("input",{type:"text",class:"form-control",id:"first-name",placeholder:"Enter First Name","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.first_name=s),required:""},null,512),[[o,a.value.first_name]]),e[10]||(e[10]=t("div",{class:"invalid-feedback"}," Please Provide Enter First Name ",-1))])]),t("div",$,[t("div",F,[e[11]||(e[11]=t("label",{for:"last-name"},"Last Name :",-1)),l(t("input",{type:"text",class:"form-control",id:"last-name",placeholder:"Enter Last Name","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.last_name=s),required:""},null,512),[[o,a.value.last_name]]),e[12]||(e[12]=t("div",{class:"invalid-feedback"}," Please Provide Enter Last Name ",-1))])])]),t("div",T,[t("div",j,[t("div",X,[e[13]||(e[13]=t("label",{for:"last-name"},"Registration Number :",-1)),l(t("input",{type:"text",class:"form-control",id:"register-number",placeholder:"Enter Registration Number","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.register_number=s),required:""},null,512),[[o,a.value.register_number]]),e[14]||(e[14]=t("div",{class:"invalid-feedback"}," Please Provide Enter Registration Number ",-1))])]),t("div",z,[e[15]||(e[15]=t("label",{for:"inputEmail4"},"Email :",-1)),l(t("input",{type:"email",class:"form-control",id:"inputEmail4",placeholder:"Enter Email Address","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.email=s),required:""},null,512),[[o,a.value.email]]),e[16]||(e[16]=t("div",{class:"invalid-feedback"}," Please Provide Enter Valid Email Address ",-1))])]),t("div",H,[t("div",O,[t("div",G,[e[17]||(e[17]=t("label",{for:"phone-number"},"Phone Number :",-1)),l(t("input",{type:"text",class:"form-control",id:"phone-number",placeholder:"Enter Phone Number","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.phone_number=s),required:"",pattern:"^(07[0-9])\\d{7}$",title:"Please enter a valid 10-digit Sri Lankan mobile number starting with 07"},null,512),[[o,a.value.phone_number]]),e[18]||(e[18]=t("div",{class:"invalid-feedback"}," Please Provide Enter Valid Phone Number ",-1))])]),t("div",J,[e[19]||(e[19]=t("label",{for:"nic-number"},"NIC Number :",-1)),l(t("input",{type:"text",class:"form-control",id:"nic-number",placeholder:"Enter NIC Number","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.nic_number=s),title:"Please enter a valid NIC number (e.g., 123456789V or 199012345678)",required:""},null,512),[[o,a.value.nic_number]]),e[20]||(e[20]=t("div",{class:"invalid-feedback"}," Please Provide Enter Valid NIC Number (e.g: 123456789V or 199012345678) ",-1))])]),t("div",K,[t("div",Q,[t("div",W,[e[21]||(e[21]=t("label",{for:"address"},"Address :",-1)),l(t("input",{type:"text",class:"form-control",id:"address",placeholder:"Enter Address","onUpdate:modelValue":e[6]||(e[6]=s=>a.value.address=s),required:""},null,512),[[o,a.value.address]]),e[22]||(e[22]=t("div",{class:"invalid-feedback"}," Please Provide Enter Address ",-1))])])]),e[23]||(e[23]=t("div",{class:"row"},[t("div",{class:"col-12 d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-primary"},"Update Ref")])],-1))],544)])])])])]),_:1}))}};export{le as default};
