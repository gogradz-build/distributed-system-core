import{_ as k}from"./AdminLayout-CP0E-03s.js";import{D as w}from"./DeleteModel-BRrvAzfs.js";import{e as x,r as i,f as N,p as C,o as r,g as O,h as E,a as t,b as p,c as d,l as I,t as n,s as u,F as R,q as B}from"./app-JnpFVuSp.js";import"./index-DmX6P9Rf.js";import{$ as P}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";import"./AdminFooter-CrMPERQ2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const V={class:"row mb-2"},$={class:"col-sm-6"},A=["href"],F={class:"col-sm-6"},j={class:"breadcrumb float-sm-right"},L={class:"breadcrumb-item"},q=["href"],H={class:"row"},J={class:"col-12"},z={class:"card card-secondary"},G={class:"card-body"},K={id:"shopTable",class:"table table-hover"},Q={key:0,class:"badge bg-info"},U={key:1,class:"badge bg-warning"},W={key:2,class:"badge bg-success"},X=["href"],Y={class:"d-flex justify-content-center align-items-center"},Z=["href"],ct={__name:"SalesManagement",setup(tt){const l=x(),c=i(!1),b=i(""),f=i(null);function v(){f.value&&(y(f.value),c.value=!1)}const y=s=>{axios.delete(`/shops/${s}`).then(e=>{var a,o;(a=e==null?void 0:e.data)!=null&&a.message?(l.warning(e.data.message),m()):(o=e==null?void 0:e.data)!=null&&o.error&&l.error(e.data.error)}).catch(e=>{var a,o,g,_;(o=(a=e.response)==null?void 0:a.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(T=>{l.error(T)}):(_=(g=e.response)==null?void 0:g.data)!=null&&_.message?l.error(e.response.data.message):l.error("An unexpected error occurred."),console.error(e)})},S=()=>{};N(()=>{M(),m(),P("#shopTable").DataTable(),C(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})});const D=i([]),m=async()=>{try{const s=await axios.get("/shops");D.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}},h=i([]),M=async()=>{try{const s=await axios.get("/sales");h.value=s.data}catch(s){console.error("Error fetching courses:",s)}};return(s,e)=>(r(),O(k,null,{default:E(()=>[t("div",V,[t("div",$,[e[2]||(e[2]=t("h1",{class:"m-0"},"SALES",-1)),t("a",{href:s.route("admin.create.Sales")},e[1]||(e[1]=[t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[t("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),p(" Create New Sales")],-1)]),8,A),e[3]||(e[3]=t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[t("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),p("Sales Record")],-1))]),t("div",F,[t("ol",j,[t("li",L,[t("a",{href:s.route("admin.dashboard")},"Home",8,q)]),e[4]||(e[4]=t("li",{class:"breadcrumb-item active"},"Sales",-1))])])]),t("div",H,[t("div",J,[t("div",z,[e[7]||(e[7]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Sales Details")],-1)),t("div",G,[t("table",K,[e[6]||(e[6]=t("thead",null,[t("tr",null,[t("th",{style:{width:"8%"}},"Sale ID"),t("th",null,"Date"),t("th",null,"Shop Name"),t("th",null,"Ref ID"),t("th",null,"Oder Status"),t("th",null,"Sub Total (RS)"),t("th",null,"Payment (RS)"),t("th",null,"Print"),t("th",null,"Action")])],-1)),t("tbody",null,[(r(!0),d(R,null,I(h.value,(a,o)=>(r(),d("tr",{key:a.sale_id},[t("td",null,n(1+o),1),t("td",null,n(a.created_at),1),t("td",null,n(a.shop.name),1),t("td",null,n(a.ref_name),1),t("td",null,[+a.order_status==1?(r(),d("span",Q,"Start To Print")):u("",!0),+a.order_status==2?(r(),d("span",U,"Print")):u("",!0),+a.order_status==3?(r(),d("span",W,"Delivered")):u("",!0)]),t("td",null,n(a.total_price),1),t("td",null,n(a.received_amount),1),t("td",null,[t("a",{href:s.route("sale.print",{sale:JSON.stringify(a)}),target:"_blank"},[t("i",{class:"fas fa-solid fa-print",style:{color:"#000000","margin-right":"5px",cursor:"pointer"},onClick:S})],8,X)]),t("td",Y,[t("a",{href:s.route("sales.edit",a.sale_id)},e[5]||(e[5]=[t("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}},null,-1)]),8,Z)])]))),128))])])])])])]),B(w,{isModalOpen:c.value,modalTitle:b.value,onClose:e[0]||(e[0]=a=>c.value=!1),onConfirmDelete:v},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ct as default};
