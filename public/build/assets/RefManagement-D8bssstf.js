import{_ as x}from"./AdminLayout-UUPC1Aa5.js";import{D as N}from"./DeleteModel-BUvQdlI9.js";import{e as R,r as d,f as F,p as y,o as u,g as I,h as k,a as e,b as v,c as _,l as C,t as r,F as E,q as S}from"./app-mDYLW31A.js";import"./index-DrsYIacS.js";import{$ as n}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";const A={class:"row mb-2"},$={class:"col-sm-6"},B=["href"],O={class:"col-sm-6"},L={class:"breadcrumb float-sm-right mt-2"},V={class:"breadcrumb-item"},j=["href"],q={class:"row"},z={class:"col-12"},H={class:"card card-secondary"},P={class:"card-body"},X={id:"refTable",class:"table table-hover"},Y={class:"d-flex justify-content-center align-items-center"},G=["onClick"],ne={__name:"RefManagement",setup(J){const l=R(),i=d(!1),m=d(""),c=d(null);function T(s,t){c.value=s,m.value=t,i.value=!0}function D(){c.value&&(w(c.value),i.value=!1)}const w=s=>{axios.delete(`/refs/${s}`).then(t=>{var a,o;(a=t==null?void 0:t.data)!=null&&a.message?(l.warning(t.data.message),n.fn.DataTable.isDataTable("#refTable")&&(n("#refTable").DataTable().destroy(),h().then(()=>{g()}))):(o=t==null?void 0:t.data)!=null&&o.error&&l.error(t.data.error)}).catch(t=>{var a,o,f,p;(o=(a=t.response)==null?void 0:a.data)!=null&&o.errors?Object.values(t.response.data.errors||{}).flat().forEach(M=>{l.error(M)}):(p=(f=t.response)==null?void 0:f.data)!=null&&p.message?l.error(t.response.data.message):l.error("An unexpected error occurred."),console.error(t)})};F(()=>{h().then(()=>{g()}),y(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})});const b=d([]),h=async()=>{try{const s=await axios.get("/refs");b.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}};function g(){y(()=>{n.fn.DataTable.isDataTable("#refTable")&&n("#refTable").DataTable().destroy(),n("#refTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}return(s,t)=>(u(),I(x,null,{default:k(()=>[e("div",A,[e("div",$,[t[2]||(t[2]=e("h2",{class:"mt-2"},"REF",-1)),e("a",{href:s.route("admin.create.ref")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),v(" Add New Ref")],-1)]),8,B),t[3]||(t[3]=e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[e("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),v("Ref Record")],-1))]),e("div",O,[e("ol",L,[e("li",V,[e("a",{href:s.route("admin.dashboard")},"Home",8,j)]),t[4]||(t[4]=e("li",{class:"breadcrumb-item active"},"Ref",-1))])])]),e("div",q,[e("div",z,[e("div",H,[e("div",P,[t[8]||(t[8]=e("h6",{style:{"font-weight":"700"},class:""}," REF DETAILS",-1)),t[9]||(t[9]=e("hr",null,null,-1)),e("table",X,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{style:{width:"8%"}},"ID"),e("th",{style:{width:"10%"}},"First Name"),e("th",{style:{width:"10%"}},"Last Name"),e("th",{style:{width:"20%"}},"Email"),e("th",{style:{width:"10%"}},"Phone No"),e("th",{style:{width:"20%"}},"Address"),e("th",{style:{width:"20%"}},"NIC No"),e("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),e("tbody",null,[(u(!0),_(E,null,C(b.value,(a,o)=>(u(),_("tr",{key:a.id},[e("td",null,r(1+o),1),e("td",null,r(a.first_name),1),e("td",null,r(a.last_name),1),e("td",null,r(a.email),1),e("td",null,r(a.phone_number),1),e("td",null,r(a.address),1),e("td",null,r(a.nic_number),1),e("td",Y,[t[6]||(t[6]=e("a",{href:""},[e("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),e("a",{onClick:f=>T(a.id,"Delete Ref"),style:{cursor:"pointer"}},t[5]||(t[5]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,G)])]))),128))])])])])])]),S(N,{isModalOpen:i.value,modalTitle:m.value,onClose:t[0]||(t[0]=a=>i.value=!1),onConfirmDelete:D},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ne as default};
