import{_ as x}from"./AdminLayout-CP0E-03s.js";import{D as M}from"./DeleteModel-BRrvAzfs.js";import{e as T,r as d,f as P,p as C,o as r,g as k,h as D,a as e,b,c as i,l as N,t as n,s as m,F as A,q as E}from"./app-JnpFVuSp.js";import"./index-DmX6P9Rf.js";import{$ as S}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";import"./AdminFooter-CrMPERQ2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const B={class:"row mb-2"},I={class:"col-sm-6"},O=["href"],V={class:"col-sm-6"},$={class:"breadcrumb float-sm-right"},F={class:"breadcrumb-item"},H=["href"],R={class:"row"},j={class:"col-12"},L={class:"card card-secondary"},U={class:"card-body"},q={id:"shopTable",class:"table table-hover"},W={key:0,class:"badge bg-success"},z={key:1,class:"badge bg-info"},G={key:2,class:"badge bg-warning"},J={class:"d-flex justify-content-center align-items-center"},K=["href"],Q=["href"],ne={__name:"PerchesManagement",setup(X){const o=T(),c=d(!1),y=d(""),f=d(null);function _(){f.value&&(v(f.value),c.value=!1)}const v=a=>{axios.delete(`/purchases/${a}`).then(t=>{var s,l;(s=t==null?void 0:t.data)!=null&&s.message?(o.warning(t.data.message),h()):(l=t==null?void 0:t.data)!=null&&l.error&&o.error(t.data.error)}).catch(t=>{var s,l,g,p;(l=(s=t.response)==null?void 0:s.data)!=null&&l.errors?Object.values(t.response.data.errors||{}).flat().forEach(w=>{o.error(w)}):(p=(g=t.response)==null?void 0:g.data)!=null&&p.message?o.error(t.response.data.message):o.error("An unexpected error occurred."),console.error(t)})};P(()=>{h(),S("#shopTable").DataTable(),C(()=>{const a=localStorage.getItem("successMessage");a&&(o.success(a),localStorage.removeItem("successMessage"))})});const u=d([]),h=async()=>{try{const a=await axios.get("/purchases");u.value=a.data,console.log(a)}catch(a){console.error("Error fetching courses:",a)}};return(a,t)=>(r(),k(x,null,{default:D(()=>[e("div",B,[e("div",I,[t[2]||(t[2]=e("h3",{class:"mt-3"},"PURCHASE",-1)),e("a",{href:a.route("admin.create.perches")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),b(" Add New Purchase")],-1)]),8,O),t[3]||(t[3]=e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[e("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),b("Purchase Record")],-1))]),e("div",V,[e("ol",$,[e("li",F,[e("a",{href:a.route("admin.dashboard")},"Home",8,H)]),t[4]||(t[4]=e("li",{class:"breadcrumb-item active"},"Purchase",-1))])])]),e("div",R,[e("div",j,[e("div",L,[e("div",U,[t[8]||(t[8]=e("h6",{style:{"font-weight":"700"},class:""},"PURCHASE TABLE",-1)),t[9]||(t[9]=e("hr",null,null,-1)),e("table",q,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"}},"ID"),e("th",{style:{width:"20%"}},"Purchase Code"),e("th",{style:{width:"25%"}},"Supplier Name"),e("th",{style:{width:"20%"}},"Warehouse Name"),e("th",{style:{width:"15%"}},"Paid amount"),e("th",{style:{width:"15%"}},"Payment Type"),e("th",{style:{width:"10%"}},"Action")])],-1)),e("tbody",null,[(r(!0),i(A,null,N(u.value,(s,l)=>(r(),i("tr",{key:u.value.id},[e("td",null,n(s.id),1),e("td",null,n(s.purchase_code),1),e("td",null,n(s.supplier.first_name)+" "+n(s.supplier.last_name),1),e("td",null,n(s.warehouse.name),1),e("td",null,n(s.received_amount),1),e("td",null,[s.payment_status===1?(r(),i("span",W,"Cash")):m("",!0),s.payment_status===2?(r(),i("span",z,"partially paid")):m("",!0),s.payment_status===3?(r(),i("span",G,"Credit")):m("",!0)]),e("td",J,[e("a",{href:a.route("admin.create.perches.return",s.id)},t[5]||(t[5]=[e("img",{src:"/images/icon/return_icon.png",width:"20px",height:"20px",style:{"margin-right":"10px"},alt:""},null,-1)]),8,K),e("a",{href:a.route("purchases.edit",s.id)},t[6]||(t[6]=[e("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}},null,-1)]),8,Q)])]))),128))])])])])])]),E(M,{isModalOpen:c.value,modalTitle:y.value,onClose:t[0]||(t[0]=s=>c.value=!1),onConfirmDelete:_},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ne as default};
