import{e as R,r as n,f as $,p as D,j as B,n as V,o as f,g as j,h as P,a,b as q,w as L,d as M,v as k,c as b,l as x,F as C,t as _,q as U}from"./app-JnpFVuSp.js";import{_ as z}from"./AdminLayout-CP0E-03s.js";import{D as H}from"./DeleteModel-BRrvAzfs.js";import{$ as d}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";import"./AdminFooter-CrMPERQ2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const X={class:"row mb-2"},Y={class:"col-sm-6"},G={class:"breadcrumb float-sm-right"},J={class:"breadcrumb-item"},K=["href"],Q={class:"row"},W={class:"col-12"},Z={class:"card card-secondary"},ee={class:"card-body"},ae={class:"row"},te={class:"col-6"},se={class:"form-group"},oe={class:"col-lg-6 mt-3"},le={class:"col-10 mt-3"},re=["onUpdate:modelValue"],ie={class:"col-2"},ne=["onClick"],de={class:"row"},ce={class:"col-12"},ue={class:"card card-secondary"},fe={class:"card-body"},me={id:"VariationTable",class:"table table-hover",style:{width:"100%"}},ve={class:"text-center"},be=["onClick"],Me={__name:"VariationManagement",setup(ge){const l=R();n([]);const i=n({name:"",values:[]}),g=n(null),c=n([]),m=n(!1),w=n(""),p=n(null);$(()=>{h().then(()=>{y()}),D(()=>{const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}),B(c,()=>{console.log("ok")});function y(){D(()=>{d.fn.DataTable.isDataTable("#VariationTable")&&d("#VariationTable").DataTable().destroy(),d("#VariationTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(l.success(s),localStorage.removeItem("successMessage"))})}const h=async()=>{try{const s=await V.get("/variations");c.value=s.data,console.log(s)}catch(s){console.error("Error fetching variation type:",s)}},A=s=>{if(s.preventDefault(),!g.value.checkValidity()){g.value.classList.add("was-validated");return}V.post("/variations",i.value).then(e=>{var t,o;(t=e==null?void 0:e.data)!=null&&t.message?(l.success(e.data.message),i.value.name="",i.value.values=[],d.fn.DataTable.isDataTable("#VariationTable")&&(d("#VariationTable").DataTable().destroy(),h().then(()=>{y()}))):(o=e==null?void 0:e.data)!=null&&o.error&&l.error(e.data.error)}).catch(e=>{var t,o,r,u,T,v;(o=(t=e.response)==null?void 0:t.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(O=>{l.error(O)}):(u=(r=e.response)==null?void 0:r.data)!=null&&u.message?l.error(e.response.data.message):(v=(T=e.response)==null?void 0:T.data)!=null&&v.error?l.error(e.response.data.error):l.error("An unexpected error occurred."),console.error(e)})},E=s=>{V.delete(`/variations/${s}`).then(e=>{var t,o;(t=e==null?void 0:e.data)!=null&&t.message?(l.warning(e.data.message),c.value=c.value.filter(r=>r.id!==s),d.fn.DataTable.isDataTable("#VariationTable")&&(d("#VariationTable").DataTable().destroy(),h().then(()=>{y()}))):(o=e==null?void 0:e.data)!=null&&o.error&&l.error(e.data.error)}).catch(e=>{var t,o,r,u;(o=(t=e.response)==null?void 0:t.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(v=>{l.error(v)}):(u=(r=e.response)==null?void 0:r.data)!=null&&u.message?l.error(e.response.data.message):l.error("An unexpected error occurred."),console.error(e)})},I=()=>{console.log(i.value.values),i.value.values.push({value:""})},N=s=>{i.value.values.splice(s,1),console.log(i.value.values)};function S(s,e){p.value=s,w.value=e,m.value=!0}function F(){p.value&&(E(p.value),m.value=!1)}return(s,e)=>(f(),j(z,null,{default:P(()=>[a("div",X,[e[3]||(e[3]=a("div",{class:"col-sm-6"},[a("h3",{class:"mt-3"},"VARIATION"),a("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[a("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),q("Variation Report")])],-1)),a("div",Y,[a("ol",G,[a("li",J,[a("a",{href:s.route("admin.dashboard")},"Home",8,K)]),e[2]||(e[2]=a("li",{class:"breadcrumb-item active"},"Variation",-1))])])]),a("div",Q,[a("div",W,[a("div",Z,[e[8]||(e[8]=a("div",{class:"card-header card-header-background"},[a("h3",{class:"card-title"},"Create New Variation"),a("div",{class:"card-tools"},[a("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[a("i",{class:"fas fa-minus"})]),a("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[a("i",{class:"fas fa-times"})])])],-1)),a("div",ee,[a("form",{class:"needs-validation",ref_key:"formRef",ref:g,onSubmit:L(A,["prevent"]),novalidate:""},[a("div",ae,[a("div",te,[a("div",se,[e[4]||(e[4]=a("label",{for:"Variation-name"},"Variation Name :",-1)),M(a("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Variation Name","onUpdate:modelValue":e[0]||(e[0]=t=>i.value.name=t),required:""},null,512),[[k,i.value.name]]),e[5]||(e[5]=a("div",{class:"invalid-feedback"}," Please Provide Enter Variation Name ",-1))])]),a("div",oe,[(f(!0),b(C,null,x(i.value.values,(t,o)=>(f(),b("div",{class:"row",key:o},[a("div",le,[M(a("input",{type:"text",class:"form-control",placeholder:"Enter Variation Type","onUpdate:modelValue":r=>t.value=r,required:""},null,8,re),[[k,t.value]]),e[6]||(e[6]=a("div",{class:"invalid-feedback"}," Please Provide Enter Variation Type ",-1))]),a("div",ie,[a("button",{type:"button",class:"btn btn-danger mt-3",onClick:r=>N(o)},"Remove",8,ne)])]))),128))]),a("div",{class:"col-lg-12 d-flex justify-content-end"},[a("button",{type:"button",class:"btn btn-secondary mt-4 mr-2",onClick:I},"Add Values to Variation Type"),e[7]||(e[7]=a("button",{type:"submit",class:"btn btn-primary mt-4 category-btn"},"Save",-1))])])],544)])])])]),a("div",de,[a("div",ce,[a("div",ue,[a("div",fe,[e[13]||(e[13]=a("h6",{style:{"font-weight":"700"},class:""}," VARIATIONS TABLE",-1)),e[14]||(e[14]=a("hr",null,null,-1)),a("table",me,[e[12]||(e[12]=a("thead",null,[a("tr",null,[a("th",{style:{width:"20%"}},"ID"),a("th",{style:{width:"40%"}},"Variation Type"),a("th",{style:{width:"20%"}},"Values"),a("th",{style:{"text-align":"center",width:"30%"}},"Action")])],-1)),a("tbody",null,[(f(!0),b(C,null,x(c.value,(t,o)=>(f(),b("tr",{key:t.id},[a("td",null,_(1+o),1),a("td",null,_(t.variation_name),1),a("td",null,_(t.variation_types),1),a("td",ve,[e[10]||(e[10]=a("a",{href:""},[a("i",{class:"fas fa-regular fa-eye mr-4",style:{color:"#0a7c46"}})],-1)),e[11]||(e[11]=a("a",{href:""},[a("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),a("a",{onClick:r=>S(t.variation_id,"Delete Variation"),style:{cursor:"pointer"}},e[9]||(e[9]=[a("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,be)])]))),128))])])])])])]),U(H,{isModalOpen:m.value,modalTitle:w.value,onClose:e[1]||(e[1]=t=>m.value=!1),onConfirmDelete:F},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{Me as default};
