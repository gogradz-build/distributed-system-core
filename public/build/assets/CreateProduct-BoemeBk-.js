import{Q as L,e as F,r as u,j as y,f as $,p as Z,n as w,o as i,g as H,h as X,a as s,w as Y,d as r,v as c,k as v,c as d,l as g,t as n,F as P,s as _}from"./app-JnpFVuSp.js";import{_ as z}from"./AdminLayout-CP0E-03s.js";import{$ as D}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";import"./vue-quill.snow-Bk9IZUCL.js";import"./AdminFooter-CrMPERQ2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"row mb-2"},J={class:"col-sm-6"},K={class:"breadcrumb float-sm-right"},ee={class:"breadcrumb-item"},se=["href"],te={class:"breadcrumb-item"},ae=["href"],oe={class:"row"},le={class:"col-12"},ie={class:"card card-secondary"},re={class:"card-body"},de={class:"row"},ue={class:"col-lg-8"},ne={class:"col-12"},ce={class:"form-group"},ve={class:"col-12"},me={class:"form-group"},pe={class:"col-"},fe={class:"form-group"},_e=["value"],be={class:"col-12"},ye={class:"form-group"},ge=["value"],Pe={class:"col-12"},he={class:"form-group"},we={class:"row purchase mt-4",id:"purchase_form"},ke={class:"col-lg-6"},Se={class:"form-group"},qe=["value"],Ce={key:0,class:"invalid-feedback"},Ee={class:"col-lg-6"},Ve={class:"form-group"},Ue=["value"],xe={class:"col-lg-6"},De={class:"form-group"},Te={class:"col-lg-6"},Be={class:"form-group"},Ne={key:0,class:"invalid-feedback"},Me={class:"col-lg-6"},Ae={class:"form-group"},Ie={key:0,class:"invalid-feedback"},Oe={class:"col-lg-6"},Re={class:"form-group"},We={key:0,class:"invalid-feedback"},Qe={class:"col-lg-6"},je={class:"form-group"},Le={key:0,class:"invalid-feedback"},Fe={class:"col-lg-4"},$e={class:"card card-row card-bg-light"},Ze={class:"card-body"},He={class:"card card-info card-outline"},Xe={class:"card-body"},Ye={class:"col-12"},ze={class:"form-group"},Ge={class:"form-group"},is={__name:"CreateProduct",setup(Je){L();const b=F(),m=u(null),o=u({}),a=u({code:"",name:"",cost:"",price:"",image:"",category_id:"",brand_id:"",supplier_id:"",warehouse_id:"",variation_id:"",order_status:"",quantity:"",purchase_code:"",paid_amount:"",payment_status:"",purchase_show:0,variation_values:{}}),h=u({});y(h,l=>{a.value.variation_values=h});const T=l=>{if(l.preventDefault(),a.value.purchase_show==1&&B()&&!m.value.checkValidity()){m.value.classList.add("was-validated");return}if(!m.value.checkValidity()){m.value.classList.add("was-validated");return}w.post("/products",a.value).then(e=>{var t,f;console.log(e),(t=e==null?void 0:e.data)!=null&&t.message?(localStorage.setItem("successMessage",e.data.message),window.location.href=route("admin.products")):(f=e==null?void 0:e.data)!=null&&f.error&&b.error(e.data.error)}).catch(e=>{var t,f,E,V,U,x;(f=(t=e.response)==null?void 0:t.data)!=null&&f.errors?(console.log((V=(E=e.response)==null?void 0:E.data)==null?void 0:V.errors),Object.values(e.response.data.errors||{}).flat().forEach(j=>{b.error(j)})):(x=(U=e.response)==null?void 0:U.data)!=null&&x.message?b.error(e.response.data.message):b.error("An unexpected error occurred."),console.log(e)})},B=()=>(o.value={},a.value.supplier_id||(o.value.supplier_id="Supplier is required"),a.value.warehouse_id||(o.value.warehouse_id="Warehouse is required"),a.value.payment_status||(o.value.payment_status="Payment Type is required"),a.value.order_status||(o.value.order_status="Order status is required"),a.value.quantity||(o.value.quantity="Quantity is required"),a.value.paid_amount||(o.value.paid_amount="Paid amount is required"),console.log(o.value),Object.keys(o).length===0);$(()=>{O(),R(),W(),Q(),I(),D("#image").fileinput({theme:"fa",uploadUrl:"#",showRemove:!1,showUpload:!1,showZoom:!1,showCaption:!1,browseClass:"btn btn-danger",browseLabel:"",browseIcon:"<i class='fa fa-plus'></i>",overwriteInitial:!1,initialPreviewAsData:!0,fileActionSettings:{showUpload:!1,showZoom:!1,removeIcon:"<i class='fa fa-times'></i>"}}),Z(()=>{D("#courseTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!1})})}),y(()=>a.value.purchase_show,l=>{console.log(l);const e=document.getElementById("purchase_form");l==1?e.style.display="flex ":e.style.display="none "}),y(()=>a.value.variation_id,l=>{h.value={},M(l);const e=document.getElementById("variation_form");l?e.style.display="block":e.style.display="none"}),y(()=>a.variation_values,l=>{console.log("Updated variation values:",l)});const N=u([]),M=async l=>{try{const e=await w.get(route("get.variation.type.data.value",{variation_id:l}));N.value=e.data}catch(e){console.error("Error fetching courses:",e)}},k=u([]),S=u([]),q=u([]),A=u([]),C=u([]),I=()=>p("/brands",C),O=()=>p("/categories",k),R=()=>p("/suppliers",S),W=()=>p("/warehouses",q),Q=()=>p("/variations",A),p=async(l,e)=>{try{const t=await w.get(l);e.value=t.data}catch(t){console.error(`Error fetching data from ${l}:`,t)}};return(l,e)=>(i(),H(z,null,{default:X(()=>[s("div",G,[e[15]||(e[15]=s("div",{class:"col-sm-6"},[s("h3",{class:"mt-3"},"CREATE NEW PRODUCT")],-1)),s("div",J,[s("ol",K,[s("li",ee,[s("a",{href:l.route("admin.dashboard")},"Home",8,se)]),s("li",te,[s("a",{href:l.route("admin.products")},"Product",8,ae)]),e[14]||(e[14]=s("li",{class:"breadcrumb-item active"}," Create Product",-1))])])]),s("div",oe,[s("div",le,[s("div",ie,[e[45]||(e[45]=s("div",{class:"card-header card-header-background"},[s("h3",{class:"card-title"},"Create New Product"),s("div",{class:"card-tools"},[s("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[s("i",{class:"fas fa-minus"})]),s("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[s("i",{class:"fas fa-times"})])])],-1)),s("div",re,[s("form",{class:"needs-validation",ref_key:"formRef",ref:m,onSubmit:Y(T,["prevent"]),novalidate:""},[s("div",de,[s("div",ue,[s("div",ne,[s("div",ce,[e[16]||(e[16]=s("label",{for:"code"},"Product Code :",-1)),r(s("input",{type:"text",class:"form-control",id:"code",placeholder:"Enter Product Code","onUpdate:modelValue":e[0]||(e[0]=t=>a.value.code=t),required:""},null,512),[[c,a.value.code]]),e[17]||(e[17]=s("div",{class:"invalid-feedback"}," Please Provide Enter Product Code ",-1))])]),s("div",ve,[s("div",me,[e[18]||(e[18]=s("label",{for:"name"},"Product Name :",-1)),r(s("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Product Name","onUpdate:modelValue":e[1]||(e[1]=t=>a.value.name=t),required:""},null,512),[[c,a.value.name]]),e[19]||(e[19]=s("div",{class:"invalid-feedback"}," Please Provide Enter Product Name ",-1))])]),s("div",pe,[s("div",fe,[e[21]||(e[21]=s("label",{for:"name"},"Product Category :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[2]||(e[2]=t=>a.value.category_id=t),required:""},[e[20]||(e[20]=s("option",{value:"",disabled:""},"Select Category",-1)),(i(!0),d(P,null,g(k.value,t=>(i(),d("option",{key:t.id,value:t.id},n(t.name),9,_e))),128))],512),[[v,a.value.category_id]]),e[22]||(e[22]=s("div",{class:"invalid-feedback"}," Please Provide Select Product Category ",-1))])]),s("div",be,[s("div",ye,[e[24]||(e[24]=s("label",{for:"name"},"Product Brand :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=t=>a.value.brand_id=t),required:""},[e[23]||(e[23]=s("option",{value:"",disabled:""},"Select Brand",-1)),(i(!0),d(P,null,g(C.value,t=>(i(),d("option",{key:t.id,value:t.id},n(t.name),9,ge))),128))],512),[[v,a.value.brand_id]])])]),s("div",Pe,[s("div",he,[e[26]||(e[26]=s("label",{for:"name"},"Purchase Status :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[4]||(e[4]=t=>a.value.purchase_show=t),required:""},e[25]||(e[25]=[s("option",{value:"0"},"Select Purchase Status",-1),s("option",{value:"2",selected:""},"Not Purchase",-1),s("option",{value:"1"},"Create Purchase",-1)]),512),[[v,a.value.purchase_show]]),e[27]||(e[27]=s("div",{class:"invalid-feedback"}," Please Provide Select Purchase Status ",-1))])]),s("div",we,[s("div",ke,[s("div",Se,[e[29]||(e[29]=s("label",{for:"name"},"Supplier :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[5]||(e[5]=t=>a.value.supplier_id=t)},[e[28]||(e[28]=s("option",{value:"",disabled:""},"Select Supplier",-1)),(i(!0),d(P,null,g(S.value,t=>(i(),d("option",{key:t.id,value:t.id},[s("span",null,n(t.first_name)+" Â "+n(t.last_name),1)],8,qe))),128))],512),[[v,a.value.supplier_id]]),o.value.supplier_id?(i(),d("div",Ce,n(o.value.supplier_id),1)):_("",!0)])]),s("div",Ee,[s("div",Ve,[e[31]||(e[31]=s("label",{for:"name"},"Warehouse :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[6]||(e[6]=t=>a.value.warehouse_id=t)},[e[30]||(e[30]=s("option",{value:"",disabled:""},"Select Warehouse",-1)),(i(!0),d(P,null,g(q.value,t=>(i(),d("option",{key:t.id,value:t.id},n(t.name),9,Ue))),128))],512),[[v,a.value.warehouse_id]]),e[32]||(e[32]=s("div",{class:"invalid-feedback"}," Please Provide Select Warehouse ",-1))])]),s("div",xe,[s("div",De,[e[33]||(e[33]=s("label",{for:"quantity"},"Purchase Code :",-1)),r(s("input",{type:"text",class:"form-control",id:"purchase_code",placeholder:"Enter Product purchase code","onUpdate:modelValue":e[7]||(e[7]=t=>a.value.purchase_code=t)},null,512),[[c,a.value.purchase_code]]),e[34]||(e[34]=s("div",{class:"invalid-feedback"}," Please Provide Enter Product Quantity ",-1))])]),s("div",Te,[s("div",Be,[e[36]||(e[36]=s("label",{for:"name"},"Payment Type :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[8]||(e[8]=t=>a.value.payment_status=t)},e[35]||(e[35]=[s("option",{value:"",disabled:""},"Select Payment Type",-1),s("option",{value:"1"},"Cash",-1),s("option",{value:"3"},"Credit",-1)]),512),[[v,a.value.payment_status]]),o.value.payment_status?(i(),d("div",Ne,n(o.value.payment_status),1)):_("",!0)])]),s("div",Me,[s("div",Ae,[e[38]||(e[38]=s("label",{for:"name"},"Order Status :",-1)),r(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[9]||(e[9]=t=>a.value.order_status=t)},e[37]||(e[37]=[s("option",{value:"",disabled:""},"Select Order Status",-1),s("option",{value:"1"},"Pending",-1),s("option",{value:"2"},"Delivered",-1)]),512),[[v,a.value.order_status]]),o.value.order_status?(i(),d("div",Ie,n(o.value.order_status),1)):_("",!0)])]),s("div",Oe,[s("div",Re,[e[39]||(e[39]=s("label",{for:"quantity"},"Product Quantity :",-1)),r(s("input",{type:"number",class:"form-control",id:"quantity",placeholder:"Enter Product Quantity","onUpdate:modelValue":e[10]||(e[10]=t=>a.value.quantity=t)},null,512),[[c,a.value.quantity]]),o.value.quantity?(i(),d("div",We,n(o.value.quantity),1)):_("",!0)])]),s("div",Qe,[s("div",je,[e[40]||(e[40]=s("label",{for:"amount"},"Paid Amount",-1)),r(s("input",{type:"number",class:"form-control",id:"amount",placeholder:"Enter Paid Amount (0-100%)","onUpdate:modelValue":e[11]||(e[11]=t=>a.value.paid_amount=t)},null,512),[[c,a.value.paid_amount]]),o.value.paid_amount?(i(),d("div",Le,n(o.value.paid_amount),1)):_("",!0)])])])]),s("div",Fe,[s("div",$e,[s("div",Ze,[s("div",He,[e[43]||(e[43]=s("div",{class:"card-header"},[s("h5",{class:"card-title fw-bold"},"Prices (Rs.)")],-1)),s("div",Xe,[s("div",Ye,[s("div",ze,[r(s("input",{type:"number",class:"form-control",id:"cost_price",placeholder:"Enter  Cost Price","onUpdate:modelValue":e[12]||(e[12]=t=>a.value.cost=t),required:""},null,512),[[c,a.value.cost]]),e[41]||(e[41]=s("div",{class:"invalid-feedback"}," Please Provide Enter Cost Price ",-1))]),s("div",Ge,[r(s("input",{type:"number",class:"form-control",id:"price",placeholder:"Enter  Price","onUpdate:modelValue":e[13]||(e[13]=t=>a.value.price=t),required:""},null,512),[[c,a.value.price]]),e[42]||(e[42]=s("div",{class:"invalid-feedback"}," Please Provide Enter Price ",-1))])])])])])])])]),e[44]||(e[44]=s("div",{class:"row"},[s("div",{class:"col-12 d-flex justify-content-end"},[s("button",{type:"submit",class:"btn btn-primary"},"Save")])],-1))],544)])])])])]),_:1}))}};export{is as default};
