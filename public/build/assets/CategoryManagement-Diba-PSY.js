import{e as N,r as n,f as S,p as y,n as p,j as O,o as h,g as A,h as B,a,b as F,w as I,d as R,v as V,c as _,l as $,t as w,F as j,q as L}from"./app-mDYLW31A.js";import{_ as q}from"./AdminLayout-UUPC1Aa5.js";import{D as G}from"./DeleteModel-BUvQdlI9.js";import{$ as i}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const P={class:"row mb-2"},X={class:"col-sm-6"},Y={class:"breadcrumb float-sm-right mt-2"},z={class:"breadcrumb-item"},H=["href"],U={class:"row"},J={class:"col-12"},K={class:"card card-secondary"},Q={class:"card-body"},W={class:"row"},Z={class:"col-lg-6"},ee={class:"form-group"},ae={class:"row"},te={class:"col-12"},se={class:"card card-secondary"},oe={class:"card-body"},le={id:"categoryTable",class:"table table-hover"},re=["onClick"],pe={__name:"CategoryManagement",setup(ie){const l=N(),u=n({name:""}),g=n(null),f=n(!1),T=n(""),b=n(null),d=n([]);function C(t,e){b.value=t,T.value=e,f.value=!0}function M(){b.value&&(x(b.value),f.value=!1)}const x=t=>{p.delete(`/categories/${t}`).then(e=>{var s,o;(s=e==null?void 0:e.data)!=null&&s.message?(l.warning(e.data.message),d.value=d.value.filter(r=>r.id!==t),i.fn.DataTable.isDataTable("#categoryTable")&&i("#categoryTable").DataTable().destroy(),y(()=>{m()})):(o=e==null?void 0:e.data)!=null&&o.error&&l.error(e.data.error)}).catch(e=>{var s,o,r,c;(o=(s=e.response)==null?void 0:s.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(v=>{l.error(v)}):(c=(r=e.response)==null?void 0:r.data)!=null&&c.message?l.error(e.response.data.message):l.error("An unexpected error occurred."),console.error(e)})},k=t=>{if(t.preventDefault(),!g.value.checkValidity()){g.value.classList.add("was-validated");return}p.post("/categories",u.value).then(e=>{var s,o;(s=e==null?void 0:e.data)!=null&&s.message?(l.success(e.data.message),u.value.name="",i.fn.DataTable.isDataTable("#categoryTable")&&(i("#categoryTable").DataTable().destroy(),D().then(()=>{m()}))):(o=e==null?void 0:e.data)!=null&&o.error&&l.error(e.data.error)}).catch(e=>{var s,o,r,c;(o=(s=e.response)==null?void 0:s.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(v=>{l.error(v)}):(c=(r=e.response)==null?void 0:r.data)!=null&&c.message?l.error(e.response.data.message):l.error("An unexpected error occurred."),console.error(e)})};S(()=>{D().then(()=>{m()}),y(()=>{const t=localStorage.getItem("successMessage");t&&(l.success(t),localStorage.removeItem("successMessage"))})});const D=async()=>{try{const t=await p.get("/categories");d.value=t.data}catch(t){console.error("Error fetching courses:",t)}};function m(){y(()=>{i.fn.DataTable.isDataTable("#categoryTable")&&i("#categoryTable").DataTable().destroy(),i("#categoryTable").DataTable({responsive:!0,scrollX:!0,scrollX:"200px",scrollCollapse:!1,paging:!0});const t=localStorage.getItem("successMessage");t&&(l.success(t),localStorage.removeItem("successMessage"))})}return O(d,()=>{m()}),(t,e)=>(h(),A(q,null,{default:B(()=>[a("div",P,[e[3]||(e[3]=a("div",{class:"col-sm-6"},[a("h2",{class:"mt-2"},"CATEGORY"),a("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[a("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),F("Category Report")])],-1)),a("div",X,[a("ol",Y,[a("li",z,[a("a",{href:t.route("admin.dashboard")},"Home",8,H)]),e[2]||(e[2]=a("li",{class:"breadcrumb-item active"},"Category",-1))])])]),a("div",U,[a("div",J,[a("div",K,[e[7]||(e[7]=a("div",{class:"card-header card-header-background"},[a("h3",{class:"card-title"},"Create New Category"),a("div",{class:"card-tools"},[a("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[a("i",{class:"fas fa-minus"})]),a("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[a("i",{class:"fas fa-times"})])])],-1)),a("div",Q,[a("form",{class:"needs-validation",ref_key:"formRef",ref:g,onSubmit:I(k,["prevent"]),novalidate:""},[a("div",W,[a("div",Z,[a("div",ee,[e[4]||(e[4]=a("label",{for:"category-name"},"Category Name :",-1)),R(a("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Category Name","onUpdate:modelValue":e[0]||(e[0]=s=>u.value.name=s),required:""},null,512),[[V,u.value.name]]),e[5]||(e[5]=a("div",{class:"invalid-feedback"}," Please Provide Enter Category Name ",-1))])]),e[6]||(e[6]=a("div",{class:"col-lg-6"},[a("label",{for:"category-name"}),a("button",{type:"submit ",class:"btn btn-primary category-btn",style:{"margin-top":"32px"}},"Save")],-1))])],544)])])])]),a("div",ae,[a("div",te,[a("div",se,[a("div",oe,[e[12]||(e[12]=a("h6",{style:{"font-weight":"700"},class:""},"CATEGORY TABLE",-1)),e[13]||(e[13]=a("hr",null,null,-1)),a("table",le,[e[11]||(e[11]=a("thead",null,[a("tr",null,[a("th",{width:"100px"},"ID"),a("th",{width:"85%"},"Category Name"),a("th",{width:"20%"},"Action")])],-1)),a("tbody",null,[(h(!0),_(j,null,$(d.value,(s,o)=>(h(),_("tr",{key:s.id},[a("td",null,w(1+o),1),a("td",null,w(s.name),1),a("td",null,[e[9]||(e[9]=a("a",{href:""},[a("i",{class:"fas fa-regular fa-eye mr-4",style:{color:"#0a7c46"}})],-1)),e[10]||(e[10]=a("a",{href:""},[a("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),a("a",{onClick:r=>C(s.id,"Delete Category"),style:{cursor:"pointer"}},e[8]||(e[8]=[a("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,re)])]))),128))])])])])])]),L(G,{isModalOpen:f.value,modalTitle:T.value,onClose:e[1]||(e[1]=s=>f.value=!1),onConfirmDelete:M},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{pe as default};
