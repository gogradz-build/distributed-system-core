import{Q as E,d as P,r as n,f as A,n as f,e as G,q as S,k as L,o as l,l as N,h as R,a as t,i as h,b as g,m as w,c as o,j as T,t as r,F as x,v as k,s as U}from"./app-C2i026LC.js";import{_ as H}from"./AdminLayout-DxRoeMN4.js";import{$ as y}from"./dataTables.bootstrap4.min-73PbsmZ0.js";/* empty css                       */import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"row mb-2"},j={class:"col-sm-6"},F=["href"],I=["disabled"],O={class:"col-sm-6"},X={class:"breadcrumb float-sm-right mt-2"},$={class:"breadcrumb-item"},q=["href"],z={class:"row mb-4"},Q={class:"col-12"},J={class:"row d-flex justify-content-center"},K={class:"col-lg-6 col-12"},W={class:"input-group mb-3"},Z=["value"],tt={class:"col-lg-6 col-12"},et={class:"input-group mb-3"},st={class:"col-lg-6 col-12"},at={class:"input-group mb-3"},lt={class:"col-lg-6 col-12"},ot={class:"input-group mb-3"},rt={class:"row mt-4"},nt={class:"col-12"},it={class:"card"},dt={class:"card-body"},ct={id:"refTable",class:"table table-hover"},ut={key:0,class:"badge badge-info"},pt={key:1,class:"badge badge-warning"},vt={key:2,class:"badge badge-danger"},mt={key:3,class:"badge badge-success"},St={__name:"MonthlySalesReport",setup(gt){E();const M=P(),u=n(""),p=n(1),v=n(""),m=n(""),_=n(""),d=n("");A(()=>{V(),f(()=>{C()})});const D=G(()=>d.value&&d.value.sales&&d.value.sales.length>0),C=()=>{y("#perchesTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0})},V=async()=>{try{const a=await S.get("/refs");_.value=a.data,console.error(_),f(()=>{y("#perchesTable").DataTable({responsive:!0,scrollX:!0,scrollY:"",scrollCollapse:!0,paging:!0})})}catch(a){console.error("Error fetching courses:",a)}};L([p,u,v,m],([a,e,s,i])=>{B(a,e,s,i)});const B=async(a,e,s,i)=>{if(!e)M.warning("Please select a shop");else try{const c={paymentStatus:a,ref_id:e};s&&(c.start_date=s),i&&(c.end_date=i);const b=await S.get(route("get.sales.payment.by.ref",{paymentStatus:a,ref_id:e,params:c}));d.value=b.data,console.log(b),f(()=>{y("#perchesTable").DataTable().clear().rows.add(b.data).draw()})}catch(c){console.error("Error fetching data table:",c)}};return(a,e)=>(l(),N(H,null,{default:R(()=>[t("div",Y,[t("div",j,[e[5]||(e[5]=t("h4",{class:"mt-2"},"MONTHLY SALES REPORT",-1)),t("a",{href:D.value?a.route("admin.sales.report.by.ref",{ref_id:u.value,status_id:p.value,start_date:v.value,end_date:m.value}):"#"},[t("button",{type:"button",class:"btn btn-success mt-4 mb-4",disabled:!D.value},e[4]||(e[4]=[t("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}},null,-1),h(" Monthly Sales Report ")]),8,I)],8,F)]),t("div",O,[t("ol",X,[t("li",$,[t("a",{href:a.route("admin.dashboard")},"Home",8,q)]),e[6]||(e[6]=t("li",{class:"breadcrumb-item active"}," Monthly Sales",-1))])])]),t("div",z,[t("div",Q,[t("div",J,[t("div",K,[t("div",W,[e[8]||(e[8]=t("label",{class:"input-group-text",for:"inputGroupSelect01"},[t("img",{src:"/images/icon/sale create  ref.svg",alt:"",width:"20px"})],-1)),g(t("select",{class:"form-select",id:"inputGroupSelect01","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},[e[7]||(e[7]=t("option",{value:"",disabled:""},"Select Ref",-1)),(l(!0),o(x,null,T(_.value,s=>(l(),o("option",{key:s.id,value:s.id},r(s.first_name)+" "+r(s.last_name),9,Z))),128))],512),[[w,u.value]])])]),t("div",tt,[t("div",et,[e[10]||(e[10]=t("label",{class:"input-group-text",for:"inputGroupSelect01"},[t("img",{src:"/images/icon/sales_payments.svg",alt:"",width:"20px"})],-1)),g(t("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s)},e[9]||(e[9]=[t("option",{value:"1"},"Start to Print",-1),t("option",{value:"2"},"Print",-1),t("option",{value:"3"},"Delivered",-1),t("option",{value:"4"},"Completed",-1),t("option",{value:"5"},"All",-1)]),512),[[w,p.value]])])]),t("div",st,[t("div",at,[e[11]||(e[11]=t("label",{class:"input-group-text",for:"startDate"},[t("img",{src:"/images/icon/calendar.svg"}),h(" Start Date")],-1)),g(t("input",{type:"date",class:"form-control",id:"startDate","onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s)},null,512),[[k,v.value]])])]),t("div",lt,[t("div",ot,[e[12]||(e[12]=t("label",{class:"input-group-text",for:"endDate"},[t("img",{src:"/images/icon/calendar.svg"}),h(" End Date")],-1)),g(t("input",{type:"date",class:"form-control",id:"endDate","onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s)},null,512),[[k,m.value]])])])])])]),t("div",rt,[t("div",nt,[t("div",it,[e[14]||(e[14]=t("div",{class:"card-header"},[t("h6",{style:{"font-weight":"700"},class:""},"Monthly Sales Details")],-1)),t("div",dt,[t("table",ct,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",{style:{}},"#"),t("th",{style:{}},"Invoice ID"),t("th",{style:{}},"Shop Name"),t("th",{style:{}},"Total Amount"),t("th",{style:{}},"Status"),t("th",{style:{}},"Status Created At"),t("th",{style:{}},"Sales Created At")])],-1)),t("tbody",null,[(l(!0),o(x,null,T(d.value.sales,(s,i)=>(l(),o("tr",{key:n.id},[t("td",null,r(1+i),1),t("td",null,"MH"+r(s.id),1),t("td",null,r(s.shop.name),1),t("td",null,r(s.total_price),1),t("td",null,[s.order_status==="1"?(l(),o("span",ut,"Start to Print")):s.order_status==="2"?(l(),o("span",pt,"Print")):s.order_status==="3"?(l(),o("span",vt,"Delivered")):s.order_status==="4"?(l(),o("span",mt,"Delivered")):U("",!0)]),t("td",null,r(new Date(s.status_update_at).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"}).replace(" ","-").replace(",","")),1),t("td",null,r(new Date(s.created_at).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"}).replace(" ","-").replace(",","")),1)]))),128))])])])])])])]),_:1}))}};export{St as default};
