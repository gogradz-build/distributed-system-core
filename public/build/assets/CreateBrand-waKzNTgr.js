import{d as O,r as n,f as F,n as p,k as L,q as v,o as w,l as R,h as V,a as e,w as M,b as j,v as q,c as x,j as P,t as B,F as X,g as z}from"./app-C2i026LC.js";import{_ as H}from"./AdminLayout-DxRoeMN4.js";import{D as U}from"./DeleteModel-C5VXcLeW.js";import{$ as i}from"./dataTables.bootstrap4.min-73PbsmZ0.js";import"./AdminFooter-BK7-hYHZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const G={class:"row mb-2"},J={class:"col-sm-6"},K={class:"breadcrumb float-sm-right mt-2"},Q={class:"breadcrumb-item"},W=["href"],Y={class:"row"},Z={class:"col-12"},aa={class:"card"},ea={class:"card-body"},ta={class:"row"},sa={class:"col-lg-6"},la={class:"form-group"},ra={class:"row"},oa={class:"col-12"},ia={class:"card card-secondary"},na={class:"card-body"},da={id:"brandTable",class:"table table-hover"},ca={class:"text-center"},ua=["onClick"],ma=["onClick"],pa={__name:"CreateBrand",setup(ba){const r=O(),c=n([]),d=n({name:""}),b=n(null),g=n(!1),h=n(null),f=n(!1),y=n(""),T=n(null);F(()=>{D().then(()=>{u()}),p(()=>{const s=localStorage.getItem("successMessage");s&&(r.success(s),localStorage.removeItem("successMessage"))})}),L(c,()=>{u()});const D=async()=>{try{const s=await v.get("/brands");c.value=s.data}catch(s){console.error("Error fetching courses:",s)}},k=s=>{if(s.preventDefault(),!b.value.checkValidity()){b.value.classList.add("was-validated");return}g.value?v.put(`/brands/${h.value}`,d.value).then(a=>{var t,l;(t=a==null?void 0:a.data)!=null&&t.message?(r.success(a.data.message),E(),N()):(l=a==null?void 0:a.data)!=null&&l.error&&r.error(a.data.error)}).catch(handleError):v.post("/brands",d.value).then(a=>{var t,l;(t=a==null?void 0:a.data)!=null&&t.message?(r.success(a.data.message),d.value.name="",i.fn.DataTable.isDataTable("#brandTable")&&(i("#brandTable").DataTable().destroy(),D().then(()=>{u()}))):(l=a==null?void 0:a.data)!=null&&l.error&&r.error(a.data.error)}).catch(a=>{var t,l,o,m;(l=(t=a.response)==null?void 0:t.data)!=null&&l.errors?Object.values(a.response.data.errors||{}).flat().forEach(_=>{r.error(_)}):(m=(o=a.response)==null?void 0:o.data)!=null&&m.message?r.error(a.response.data.message):r.error("An unexpected error occurred."),console.error(a)})},C=s=>{d.value.name=s.name,h.value=s.id,g.value=!0},E=()=>{d.value.name="",g.value=!1,h.value=null,b.value.classList.remove("was-validated")},N=()=>{i.fn.DataTable.isDataTable("#brandTable")&&(i("#brandTable").DataTable().destroy(),D().then(()=>{u()}))},S=s=>{v.delete(`/brands/${s}`).then(a=>{var t,l;(t=a==null?void 0:a.data)!=null&&t.message?(r.warning(a.data.message),c.value=c.value.filter(o=>o.id!==s),i.fn.DataTable.isDataTable("#brandTable")&&i("#brandTable").DataTable().destroy(),p(()=>{u()})):(l=a==null?void 0:a.data)!=null&&l.error&&r.error(a.data.error)}).catch(a=>{var t,l,o,m;(l=(t=a.response)==null?void 0:t.data)!=null&&l.errors?Object.values(a.response.data.errors||{}).flat().forEach(_=>{r.error(_)}):(m=(o=a.response)==null?void 0:o.data)!=null&&m.message?r.error(a.response.data.message):r.error("An unexpected error occurred."),console.error(a)})};function u(){p(()=>{i.fn.DataTable.isDataTable("#brandTable")&&i("#brandTable").DataTable().destroy(),i("#brandTable").DataTable({responsive:!0,scrollX:!0,scrollX:"200px",scrollCollapse:!1,paging:!0});const s=localStorage.getItem("successMessage");s&&(r.success(s),localStorage.removeItem("successMessage"))})}function $(s,a){T.value=s,y.value=a,f.value=!0}function A(){T.value&&(S(T.value),f.value=!1)}return(s,a)=>(w(),R(H,null,{default:V(()=>[e("div",G,[a[3]||(a[3]=e("div",{class:"col-sm-6"},[e("h4",{class:"mt-2"},"BRAND")],-1)),e("div",J,[e("ol",K,[e("li",Q,[e("a",{href:s.route("admin.dashboard")},"Home",8,W)]),a[2]||(a[2]=e("li",{class:"breadcrumb-item active"},"Brand",-1))])])]),e("div",Y,[e("div",Z,[e("div",aa,[a[7]||(a[7]=e("div",{class:"card-header"},[e("h3",{class:"card-title",style:{"font-weight":"700"}},"Create New Brand"),e("div",{class:"card-tools"},[e("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[e("i",{class:"fas fa-minus"})]),e("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[e("i",{class:"fas fa-times"})])])],-1)),e("div",ea,[e("form",{class:"needs-validation",ref_key:"formRef",ref:b,onSubmit:M(k,["prevent"]),novalidate:""},[e("div",ta,[e("div",sa,[e("div",la,[a[4]||(a[4]=e("label",{for:"brand-name"},"Brand Name :",-1)),j(e("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter brand Name","onUpdate:modelValue":a[0]||(a[0]=t=>d.value.name=t),required:""},null,512),[[q,d.value.name]]),a[5]||(a[5]=e("div",{class:"invalid-feedback"}," Please Provide Enter Brand Name ",-1))])]),a[6]||(a[6]=e("div",{class:"col-lg-6"},[e("label",{for:"brand-name"}),e("button",{type:"submit ",class:"btn btn-primary brand-btn",style:{"margin-top":"32px"}},"Save")],-1))])],544)])])])]),e("div",ra,[e("div",oa,[e("div",ia,[e("div",na,[a[11]||(a[11]=e("h6",{style:{"font-weight":"700"},class:""}," BRAND TABLE",-1)),a[12]||(a[12]=e("hr",null,null,-1)),e("table",da,[a[10]||(a[10]=e("thead",null,[e("tr",null,[e("th",{width:"100px"},"id"),e("th",{width:"85%"},"Brands Name"),e("th",{width:"20%"},"Action")])],-1)),e("tbody",null,[(w(!0),x(X,null,P(c.value,(t,l)=>(w(),x("tr",{key:t.id},[e("td",null,B(1+l),1),e("td",null,B(t.name),1),e("td",ca,[e("a",{href:"#",onClick:M(o=>C(t),["prevent"])},a[8]||(a[8]=[e("img",{src:"/images/icon/edit.png",alt:"",width:"25px",height:"25px",class:"mr-2 table-action-icon"},null,-1)]),8,ua),e("a",{onClick:o=>$(t.id,"Delete Brand"),style:{cursor:"pointer"}},a[9]||(a[9]=[e("img",{src:"/images/icon/trash-bin.png",alt:"",width:"25px",height:"25px",class:"table-action-icon"},null,-1)]),8,ma)])]))),128))])])])])])]),z(U,{isModalOpen:f.value,modalTitle:y.value,onClose:a[1]||(a[1]=t=>f.value=!1),onConfirmDelete:A},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{pa as default};
