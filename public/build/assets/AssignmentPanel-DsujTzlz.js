import{_ as Y}from"./LecturerDashboardLayout-5PvDjXDF.js";import{e as q,r as v,f as O,p as E,N as z,o as d,c as r,a as e,w as H,d as M,v as x,F as $,l as T,t as i,q as N,n as D,k as L,b as G,g as J,h as K,E as I,s as U}from"./app-JnpFVuSp.js";import{D as Q}from"./DeleteModel-BRrvAzfs.js";import{$ as R}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";/* empty css                                                         */import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AdminFooter-CrMPERQ2.js";/* empty css                                                                    */const W={name:"AssignmentCreate",components:{DeleteModel:Q},props:{schedule_id:{type:String,required:!0},subject_id:{type:String,required:!0}},setup(c){const t=q(),f=v(""),l=v(""),h=v(""),g=v(null),s=v(!1),a=v(""),n=v(null),u=v([]),o=v(null),b=()=>{D.get(route("subject.assignments",{subject_id:c.subject_id,schedule_id:c.schedule_id})).then(y=>{u.value=y.data}).catch(y=>{console.error(y),t.error("Failed to fetch assignments")})},k=y=>{g.value=y.target.files[0]},A=y=>{if(y.preventDefault(),!o.value.checkValidity()){o.value.classList.add("was-validated");return}const m=new FormData;m.append("title",f.value),m.append("deadlineDate",l.value),m.append("deadlineTime",h.value),g.value&&m.append("document",g.value),D.post(route("assignments.add.store",{subject_id:c.subject_id,schedule_id:c.schedule_id}),m).then(_=>{var p,w;(p=_==null?void 0:_.data)!=null&&p.message?(t.success("Assignment created successfully!"),f.value="",l.value="",h.value="",g.value=null,b()):(w=_==null?void 0:_.data)!=null&&w.errors&&t.error(_.data.error)}).catch(_=>{var p,w,C,F;(w=(p=_.response)==null?void 0:p.data)!=null&&w.errors?Object.values(_.response.data.errors||{}).flat().forEach(X=>t.error(X)):(F=(C=_.response)==null?void 0:C.data)!=null&&F.message?t.error(_.response.data.message):t.error("An unexpected error occurred."),console.error(_)})},j=(y,m)=>{n.value=y,a.value=m,s.value=!0,console.log("Triggering modal:",s.value)},V=()=>{console.log("1"),n.value&&(S(n.value),s.value=!1)},S=y=>{console.log(y),D.delete(`/assignments/${y}`).then(m=>{var _,p;(_=m==null?void 0:m.data)!=null&&_.message?(b(),t.warning("Assignment deleted successfully")):(p=m==null?void 0:m.data)!=null&&p.error&&t.error(m.data.error)}).catch(m=>{var _,p,w,C;(p=(_=m.response)==null?void 0:_.data)!=null&&p.errors?Object.values(m.response.data.errors||{}).flat().forEach(P=>t.error(P)):(C=(w=m.response)==null?void 0:w.data)!=null&&C.message?t.error(m.response.data.message):t.error("An unexpected error occurred."),console.error(m)})};return O(()=>{b(),E(()=>{R("#NoteTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0,ordering:!0,columnDefs:[{orderable:!1,targets:[4]}],order:[[1,"asc"]]})})}),{formRef:o,title:f,deadlineDate:l,deadlineTime:h,assignmentDocument:g,isModalOpen:s,modalTitle:a,deleteID:n,assignments:u,handleSubmit:A,handleFileUpload:k,triggerModal:j,confirmDelete:V,deleteAssignment:S}}},Z={class:"row mt-4"},ee={class:"row mt-4"},te={class:"col-12 col-lg-6"},se={class:"mb-3"},le={class:"col-12 col-lg-6"},ae={class:"mb-3"},ne={class:"col-12 col-lg-6"},oe={class:"mb-3"},de={class:"col-12 col-lg-6"},re={class:"mb-3"},ie={class:"row mt-4"},ce={class:"col-12"},ue={class:"card card-secondary"},me={class:"card-body"},ge={id:"NoteTable",class:"table table-hover"},_e=["href"],fe={key:1},ve={class:"d-flex justify-content-center align-items-center"},he=["onClick"];function be(c,t,f,l,h,g){const s=z("DeleteModel");return d(),r($,null,[e("div",Z,[e("form",{class:"needs-validation",ref:"formRef",onSubmit:t[4]||(t[4]=H((...a)=>l.handleSubmit&&l.handleSubmit(...a),["prevent"])),novalidate:""},[e("div",ee,[e("div",te,[e("div",se,[t[6]||(t[6]=e("label",{for:"title",class:"form-label"},"Assignment Name",-1)),M(e("input",{type:"text",class:"form-control",id:"title",placeholder:"Assignment Name","onUpdate:modelValue":t[0]||(t[0]=a=>l.title=a),required:""},null,512),[[x,l.title]]),t[7]||(t[7]=e("div",{class:"invalid-feedback"},"Please provide an assignment name.",-1))])]),e("div",le,[e("div",ae,[t[8]||(t[8]=e("label",{for:"deadlineDate",class:"form-label"},"Assignment Deadline Date",-1)),M(e("input",{type:"date",class:"form-control",id:"deadlineDate","onUpdate:modelValue":t[1]||(t[1]=a=>l.deadlineDate=a),required:""},null,512),[[x,l.deadlineDate]]),t[9]||(t[9]=e("div",{class:"invalid-feedback"},"Please provide a deadline date.",-1))])]),e("div",ne,[e("div",oe,[t[10]||(t[10]=e("label",{for:"deadlineTime",class:"form-label"},"Assignment Deadline Time",-1)),M(e("input",{type:"time",class:"form-control",id:"deadlineTime","onUpdate:modelValue":t[2]||(t[2]=a=>l.deadlineTime=a),required:""},null,512),[[x,l.deadlineTime]]),t[11]||(t[11]=e("div",{class:"invalid-feedback"},"Please provide a deadline time.",-1))])]),e("div",de,[e("div",re,[t[12]||(t[12]=e("label",{for:"assignmentDocument",class:"form-label"},"Assignment Document",-1)),e("input",{class:"form-control",type:"file",id:"formFileMultiple",accept:"application/pdf",onChange:t[3]||(t[3]=(...a)=>l.handleFileUpload&&l.handleFileUpload(...a)),multiple:""},null,32)])]),t[13]||(t[13]=e("div",{class:"col-12 d-flex justify-content-end align-items-center"},[e("button",{type:"submit",class:"btn btn-primary assignment-btn"},"Create")],-1))])],544)]),e("div",ie,[e("div",ce,[e("div",ue,[e("div",me,[e("table",ge,[t[16]||(t[16]=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"}},"#"),e("th",{style:{width:"20%"}},"subject Name"),e("th",{style:{}},"Course Name"),e("th",{style:{}},"Batch"),e("th",{style:{}},"Assignment Name"),e("th",{style:{}},"Created At"),e("th",{style:{}},"Deadline Date"),e("th",{style:{}},"Deadline Time"),e("th",{style:{}},"Document"),e("th",null,"Status"),e("th",{style:{}},"Action")])],-1)),e("tbody",null,[(d(!0),r($,null,T(l.assignments,(a,n)=>(d(),r("tr",{key:a.id},[e("td",null,i(n+1),1),e("td",null,i(a.subject_name),1),e("td",null,i(a.course_name),1),e("td",null,i(a.batch_name),1),e("td",null,i(a.assignment_title),1),e("td",null,i(new Date(a.created_at).toLocaleDateString()),1),e("td",null,i(a.deadline_date),1),e("td",null,i(a.deadline_time),1),e("td",null,[a.document_url?(d(),r("a",{key:0,href:"/storage/"+a.document_url,target:"_blank"}," Download Document ",8,_e)):(d(),r("span",fe,"No document available"))]),t[15]||(t[15]=e("td",null,[e("span",{class:"badge bg-warning text-dark"},"Collect Student Marks")],-1)),e("td",ve,[e("a",{onClick:u=>l.triggerModal(a.id,"Delete Assignment"),style:{cursor:"pointer"}},t[14]||(t[14]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,he)])]))),128))])])])])])]),N(s,{isModalOpen:l.isModalOpen,modalTitle:l.modalTitle,onClose:t[5]||(t[5]=a=>l.isModalOpen=!1),onConfirmDelete:l.confirmDelete},null,8,["isModalOpen","modalTitle","onConfirmDelete"])],64)}const ke=B(W,[["render",be]]),ye={name:"AssignmentCreate",props:{schedule_id:{type:String,required:!0},subject_id:{type:String,required:!0}},setup(c){const t=q(),f=v([]),l=v(null),h=v([]),g=n=>{D.get(route("subject.assignments.submissions",{assignment_id:n.id})).then(u=>{h.value=u.data,console.log(u.data)}).catch(u=>{console.error(u)})},s=()=>{D.get(route("subject.assignments",{subject_id:c.subject_id,schedule_id:c.schedule_id})).then(n=>{f.value=n.data}).catch(n=>{console.error(n)})},a=n=>{console.log("Assignment ID:",n.id),console.log("Marks:",n.marks);const u=new FormData;u.append("submission_id",n.id),u.append("mark",n.marks),D.post(route("assignment.submission.marks"),u).then(o=>{var b,k;(b=o==null?void 0:o.data)!=null&&b.massage?t.success("Mark saved"):(k=o==null?void 0:o.data)!=null&&k.error&&t.error(o.data.error)}).catch(o=>{var b,k,A,j;(k=(b=o.response)==null?void 0:b.data)!=null&&k.errors?Object.values(o.response.data.errors||{}).flat().forEach(S=>t.error(S)):(j=(A=o.response)==null?void 0:A.data)!=null&&j.message?t.error(o.response.data.message):t.error("An unexpected error occurred."),console.error(o)})};return O(()=>{s(),E(()=>{R("#marksTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0,ordering:!0,columnDefs:[{orderable:!1,targets:[4]}],order:[[1,"asc"]]})})}),{assignments:f,selectedAssignmentId:l,assignmentSubmissions:g,submissions:h,saveMarks:a}}},pe={class:"row mt-4"},De={class:"row mt-4"},we={class:"col-12 col-lg-6"},$e={class:"mb-3"},Ae=["value"],je={class:"row mt-4"},Me={class:"col-12"},Se={class:"card card-secondary"},Ce={class:"card-body"},xe={id:"marksTable",class:"table table-hover"},Te={key:0,class:"badge bg-success text-dark"},Ne={key:1,class:"badge bg-danger text-dark"},Ve=["href"],Fe={key:1},Ie=["onUpdate:modelValue"],Ue={class:"d-flex justify-content-center align-items-center"},qe=["onClick"];function Oe(c,t,f,l,h,g){return d(),r($,null,[e("div",pe,[e("form",null,[e("div",De,[e("div",we,[e("div",$e,[t[3]||(t[3]=e("label",{for:"assignment",class:"form-label"},"Select Assignment",-1)),M(e("select",{id:"assignment",class:"form-select","onUpdate:modelValue":t[0]||(t[0]=s=>l.selectedAssignmentId=s),onChange:t[1]||(t[1]=s=>l.assignmentSubmissions(l.assignments.find(a=>a.id===l.selectedAssignmentId)))},[t[2]||(t[2]=e("option",{value:"",disabled:"",selected:""},"Select Assignment",-1)),(d(!0),r($,null,T(l.assignments,s=>(d(),r("option",{key:s.id,value:s.id},i(s.assignment_title),9,Ae))),128))],544),[[L,l.selectedAssignmentId]])])])])])]),e("div",je,[e("div",Me,[e("div",Se,[e("div",Ce,[e("table",xe,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"}},"#"),e("th",{style:{width:""}},"Student ID"),e("th",{style:{}},"batch"),e("th",{style:{width:"20%"}},"Assignment Name"),e("th",{style:{width:""}},"Submit on"),e("th",{style:{width:""}},"Document"),e("th",{style:{width:""}},"Marks"),e("th",null,"Save Marks")])],-1)),e("tbody",null,[(d(!0),r($,null,T(l.submissions,(s,a)=>(d(),r("tr",{key:a},[e("td",null,i(a+1),1),e("td",null,i(s.register_number),1),e("td",null,i(s.batch_name),1),e("td",null,i(s.assignment_name),1),e("td",null,[new Date(s.submit_time)<=new Date(s.assignment_deadline)?(d(),r("span",Te,i(s.submit_time),1)):(d(),r("span",Ne,i(s.submit_time),1))]),e("td",null,[s.submit_url?(d(),r("a",{key:0,href:"/storage/"+s.submit_url,target:"_blank"}," Download Document ",8,Ve)):(d(),r("span",Fe,"No document available"))]),e("td",null,[M(e("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>s.marks=n,placeholder:"Assignment Marks"},null,8,Ie),[[x,s.marks]])]),e("td",Ue,[e("button",{class:"btn btn-warning",onClick:n=>l.saveMarks(s)},"Save",8,qe)])]))),128))])])])])])])],64)}const Ee=B(ye,[["render",Oe]]),Re={name:"AssignmentCreate",props:{schedule_id:{type:String,required:!0},subject_id:{type:String,required:!0}},setup(c){const t=q(),f=v([]),l=v(null),h=v([]),g=n=>{D.get(route("subject.assignments.submissions",{assignment_id:n.id})).then(u=>{h.value=u.data,console.log(u.data)}).catch(u=>{console.error(u)})},s=()=>{D.get(route("subject.assignments",{subject_id:c.subject_id,schedule_id:c.schedule_id})).then(n=>{f.value=n.data}).catch(n=>{console.error(n)})},a=n=>{console.log("Assignment ID:",n.id),console.log("Marks:",n.marks);const u=new FormData;u.append("submission_id",n.id),u.append("mark",n.marks),D.post(route("assignment.submission.marks"),u).then(o=>{var b,k;(b=o==null?void 0:o.data)!=null&&b.massage?t.success("Mark saved"):(k=o==null?void 0:o.data)!=null&&k.error&&t.error(o.data.error)}).catch(o=>{var b,k,A,j;(k=(b=o.response)==null?void 0:b.data)!=null&&k.errors?Object.values(o.response.data.errors||{}).flat().forEach(S=>t.error(S)):(j=(A=o.response)==null?void 0:A.data)!=null&&j.message?t.error(o.response.data.message):t.error("An unexpected error occurred."),console.error(o)})};return O(()=>{s(),E(()=>{R("#marksTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0,ordering:!0,columnDefs:[{orderable:!1,targets:[4]}],order:[[1,"asc"]]})})}),{assignments:f,selectedAssignmentId:l,assignmentSubmissions:g,submissions:h,saveMarks:a}}},Be={class:"row mt-4"},Pe={class:"row mt-4"},Le={class:"col-12 col-lg-6"},Xe={class:"mb-3"},Ye=["value"],ze={class:"row mt-4"},He={class:"col-12"},Ge={class:"card card-secondary"},Je={class:"card-body"},Ke={id:"marksTable",class:"table table-hover"},Qe={key:0,class:"badge bg-success text-dark"},We={key:1,class:"badge bg-danger text-dark"},Ze=["href"],et={key:1},tt=["onUpdate:modelValue"],st={class:"d-flex justify-content-center align-items-center"},lt=["onClick"];function at(c,t,f,l,h,g){return d(),r($,null,[e("div",Be,[e("form",null,[e("div",Pe,[e("div",Le,[e("div",Xe,[t[3]||(t[3]=e("label",{for:"assignment",class:"form-label"},"Select Assignment",-1)),M(e("select",{id:"assignment",class:"form-select","onUpdate:modelValue":t[0]||(t[0]=s=>l.selectedAssignmentId=s),onChange:t[1]||(t[1]=s=>l.assignmentSubmissions(l.assignments.find(a=>a.id===l.selectedAssignmentId)))},[t[2]||(t[2]=e("option",{value:"",disabled:"",selected:""},"Select Assignment",-1)),(d(!0),r($,null,T(l.assignments,s=>(d(),r("option",{key:s.id,value:s.id},i(s.assignment_title),9,Ye))),128))],544),[[L,l.selectedAssignmentId]])])]),t[4]||(t[4]=e("div",{class:"col-lg-6 col-12 d-flex justify-content-start align-items-center"},[e("button",{type:"button",class:"btn btn-danger mt-3"},[e("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),G("All Records")])],-1))])])]),e("div",ze,[e("div",He,[e("div",Ge,[e("div",Je,[e("table",Ke,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"}},"#"),e("th",{style:{width:""}},"Student ID"),e("th",{style:{}},"batch"),e("th",{style:{width:"20%"}},"Assignment Name"),e("th",{style:{width:""}},"Submit on"),e("th",{style:{width:""}},"Document"),e("th",{style:{width:""}},"Marks"),e("th",null,"Save Marks")])],-1)),e("tbody",null,[(d(!0),r($,null,T(l.submissions,(s,a)=>(d(),r("tr",{key:a},[e("td",null,i(a+1),1),e("td",null,i(s.register_number),1),e("td",null,i(s.batch_name),1),e("td",null,i(s.assignment_name),1),e("td",null,[new Date(s.submit_time)<=new Date(s.assignment_deadline)?(d(),r("span",Qe,i(s.submit_time),1)):(d(),r("span",We,i(s.submit_time),1))]),e("td",null,[s.submit_url?(d(),r("a",{key:0,href:"/storage/"+s.submit_url,target:"_blank"}," Download Document ",8,Ze)):(d(),r("span",et,"No document available"))]),e("td",null,[M(e("input",{type:"number",class:"form-control","onUpdate:modelValue":n=>s.marks=n,placeholder:"Assignment Marks"},null,8,tt),[[x,s.marks]])]),e("td",st,[e("button",{class:"btn btn-warning",onClick:n=>l.saveMarks(s)},"Save",8,lt)])]))),128))])])])])])])],64)}const nt=B(Re,[["render",at]]),ot={class:"row mb-2"},dt={class:"col-sm-6"},rt={class:"col-sm-6"},it={class:"breadcrumb float-sm-right"},ct={class:"breadcrumb-item"},ut=["href"],mt={class:"breadcrumb-item"},gt=["href"],_t={class:"row"},ft={class:"nav nav-tabs"},vt={class:"nav-item"},ht={class:"nav-item"},bt={class:"nav-item"},kt={key:0},yt={key:1},pt={key:2},xt={__name:"AssignmentPanel",props:{schedule_id:String,subject_id:String,subject_name:String},setup(c){const t=v(!0),f=v(!1),l=v(!1),h=g=>{g=="create"&&(f.value=!1,l.value=!1,t.value=!0),g=="marks"&&(t.value=!1,l.value=!1,f.value=!0),g=="report"&&(t.value=!1,f.value=!1,l.value=!0)};return(g,s)=>(d(),J(Y,null,{default:K(()=>[e("div",ot,[e("div",dt,[s[3]||(s[3]=e("h1",{class:"m-0"},"Subjects",-1)),e("span",null,i(c.subject_name),1)]),e("div",rt,[e("ol",it,[e("li",ct,[e("a",{href:g.route("lecturer.dashboard")},"Home",8,ut)]),e("li",mt,[e("a",{href:g.route("lecturer.course.show")},"Courses",8,gt)]),s[4]||(s[4]=e("li",{class:"breadcrumb-item"},"Subject",-1))])])]),s[5]||(s[5]=e("div",{class:"row"},[e("div",{class:"col-lg-12"},[e("h2",{class:"text-center"},"Assignment Panel")])],-1)),e("div",_t,[e("ul",ft,[e("li",vt,[e("a",{class:I(["nav-link",{active:t.value}]),"aria-current":"page",href:"#",onClick:s[0]||(s[0]=a=>h("create"))},"Create",2)]),e("li",ht,[e("a",{class:I(["nav-link",{active:f.value}]),href:"#",onClick:s[1]||(s[1]=a=>h("marks"))},"Marks",2)]),e("li",bt,[e("a",{class:I(["nav-link",{active:l.value}]),href:"#",onClick:s[2]||(s[2]=a=>h("report"))},"Report",2)])])]),t.value?(d(),r("div",kt,[N(ke,{schedule_id:c.schedule_id,subject_id:c.subject_id},null,8,["schedule_id","subject_id"])])):U("",!0),f.value?(d(),r("div",yt,[N(Ee,{schedule_id:c.schedule_id,subject_id:c.subject_id},null,8,["schedule_id","subject_id"])])):U("",!0),l.value?(d(),r("div",pt,[N(nt,{schedule_id:c.schedule_id,subject_id:c.subject_id},null,8,["schedule_id","subject_id"])])):U("",!0)]),_:1}))}};export{xt as default};
