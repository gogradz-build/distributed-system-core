import{r,e as D,i as T,f as k,o as m,g as C,h as N,a as e,d as $,v as B,w as E,c as h,l as F,t as g,F as O,q as j,n as v,p as A}from"./app-mDYLW31A.js";import{_ as V}from"./AdminLayout-UUPC1Aa5.js";import{D as q}from"./DeleteModel-BUvQdlI9.js";import{$ as I}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const L={class:"row"},S={class:"col-6"},H={class:"card card-success"},U={class:"card-body"},z={class:"form-group"},G={class:"row justify-content-end"},J={class:"row"},K={class:"col-12"},P={class:"card card-success"},Q={class:"card-body"},W={id:"permissionsTable",class:"table table-hover"},X={style:{"text-align":"center"}},Y=["disabled","onClick"],ue={__name:"Roll",setup(Z){const n=r(""),l=D(),i=r([]),d=r(!1),f=r(""),c=r(null);function y(o,t,s){c.value=o,f.value=s,d.value=!0}function _(){c.value&&(M(c.value),d.value=!1)}const w=T(()=>i.value.slice().reverse()),R=()=>{const o={role:n.value};v.post("/roles",o).then(t=>{const s=t.data.role;l.success(t.data.status||"Role created successfully"),i.value.push({id:s.id,name:s.name}),n.value=""}).catch(t=>{var s,a;console.error("Error saving role:",t),l.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.error)||"An error occurred while saving the role.")})},M=o=>{v.delete(`/roles/${o}`).then(t=>{var s,a;(s=t==null?void 0:t.data)!=null&&s.message?(l.warning("Role deleted successfully"),b()):(a=t==null?void 0:t.data)!=null&&a.error&&l.error(t.data.error)}).catch(t=>{var s,a,u,p;(a=(s=t.response)==null?void 0:s.data)!=null&&a.errors?Object.values(t.response.data.errors||{}).flat().forEach(x=>{l.error(x)}):(p=(u=t.response)==null?void 0:u.data)!=null&&p.message?l.error(t.response.data.message):l.error("An unexpected error occurred."),console.error(t)})},b=async()=>{try{const o=await v.get("/roles");i.value=o.data,A(()=>{I("#permissionsTable").DataTable()})}catch(o){console.error("Error fetching roles:",o)}};return k(()=>{b()}),(o,t)=>(m(),C(V,null,{default:N(()=>[t[7]||(t[7]=e("div",{class:"row mb-2"},[e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"Role Management")]),e("div",{class:"col-sm-6"},[e("ol",{class:"breadcrumb float-sm-right"},[e("li",{class:"breadcrumb-item"},[e("a",{href:"#"},"Home")]),e("li",{class:"breadcrumb-item active"},"Role Management")])])],-1)),e("div",L,[e("div",S,[e("div",H,[t[3]||(t[3]=e("div",{class:"card-header bg-secondary"},[e("h3",{class:"card-title"},"Create Role"),e("div",{class:"card-tools"},[e("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"}),e("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"})])],-1)),e("div",U,[e("form",null,[e("div",z,[t[2]||(t[2]=e("label",{for:"roleName"},"Role Name :",-1)),$(e("input",{type:"text",id:"roleName",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),required:""},null,512),[[B,n.value]])]),e("div",G,[e("button",{type:"submit",class:"btn btn-primary justify-content-end align-items-end w-25",onClick:E(R,["prevent"])},"Save")])])])])])]),e("div",J,[e("div",K,[e("div",P,[t[6]||(t[6]=e("div",{class:"card-header bg-secondary"},[e("h3",{class:"card-title"},"Roles")],-1)),e("div",Q,[e("table",W,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{style:{width:"20%"}},"ID"),e("th",{style:{width:"70%"}},"Role"),e("th",{style:{width:"10%","text-align":"center"}},"Action")])],-1)),e("tbody",null,[(m(!0),h(O,null,F(w.value,(s,a)=>(m(),h("tr",{key:s.id},[e("td",null,g(a+1),1),e("td",null,g(s.name),1),e("td",X,[e("button",{type:"button",class:"btn mr-2",style:{cursor:"pointer"},disabled:s.name.toLowerCase()==="super admin",onClick:u=>y(s.id,"Delete Role")},t[4]||(t[4]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,Y)])]))),128))])])])])])]),j(q,{isModalOpen:d.value,modalTitle:f.value,onClose:t[1]||(t[1]=s=>d.value=!1),onConfirmDelete:_},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ue as default};
