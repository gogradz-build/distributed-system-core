import{_ as x}from"./AdminLayout-UUPC1Aa5.js";import{D as M}from"./DeleteModel-BUvQdlI9.js";import{e as P,r as d,f as T,p as C,o as r,g as k,h as D,a as t,b as y,c as i,l as S,t as n,s as m,F as A,q as N}from"./app-mDYLW31A.js";import"./index-DrsYIacS.js";import{$ as E}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";const B={class:"row mb-2"},O={class:"col-sm-6"},I=["href"],V={class:"col-sm-6"},$={class:"breadcrumb float-sm-right mt-2"},F={class:"breadcrumb-item"},H=["href"],R={class:"row"},j={class:"col-12"},L={class:"card card-secondary"},U={class:"card-body"},q={id:"shopTable",class:"table table-hover"},W={key:0,class:"badge bg-success"},z={key:1,class:"badge bg-info"},G={key:2,class:"badge bg-warning"},J={class:"d-flex justify-content-center align-items-center"},K=["href"],Q=["href"],ct={__name:"PerchesManagement",setup(X){const o=P(),c=d(!1),b=d(""),f=d(null);function _(){f.value&&(v(f.value),c.value=!1)}const v=a=>{axios.delete(`/purchases/${a}`).then(e=>{var s,l;(s=e==null?void 0:e.data)!=null&&s.message?(o.warning(e.data.message),h()):(l=e==null?void 0:e.data)!=null&&l.error&&o.error(e.data.error)}).catch(e=>{var s,l,p,g;(l=(s=e.response)==null?void 0:s.data)!=null&&l.errors?Object.values(e.response.data.errors||{}).flat().forEach(w=>{o.error(w)}):(g=(p=e.response)==null?void 0:p.data)!=null&&g.message?o.error(e.response.data.message):o.error("An unexpected error occurred."),console.error(e)})};T(()=>{h(),E("#shopTable").DataTable(),C(()=>{const a=localStorage.getItem("successMessage");a&&(o.success(a),localStorage.removeItem("successMessage"))})});const u=d([]),h=async()=>{try{const a=await axios.get("/purchases");u.value=a.data,console.log(a)}catch(a){console.error("Error fetching courses:",a)}};return(a,e)=>(r(),k(x,null,{default:D(()=>[t("div",B,[t("div",O,[e[2]||(e[2]=t("h2",{class:"mt-2"},"PURCHASE",-1)),t("a",{href:a.route("admin.create.perches")},e[1]||(e[1]=[t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[t("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),y(" Add New Perches")],-1)]),8,I),e[3]||(e[3]=t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[t("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),y("Purchase Record")],-1))]),t("div",V,[t("ol",$,[t("li",F,[t("a",{href:a.route("admin.dashboard")},"Home",8,H)]),e[4]||(e[4]=t("li",{class:"breadcrumb-item active"},"Purchase",-1))])])]),t("div",R,[t("div",j,[t("div",L,[t("div",U,[e[8]||(e[8]=t("h6",{style:{"font-weight":"700"},class:""},"PURCHASE TABLE",-1)),e[9]||(e[9]=t("hr",null,null,-1)),t("table",q,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{style:{width:"5%"}},"ID"),t("th",{style:{width:"20%"}},"Purchase Code"),t("th",{style:{width:"25%"}},"Supplier Name"),t("th",{style:{width:"20%"}},"Warehouse Name"),t("th",{style:{width:"15%"}},"Paid Amount"),t("th",{style:{width:"15%"}},"Payment Status"),t("th",{style:{width:"10%"}},"Order Status"),t("th",{style:{width:"15%"}},"Payment Type"),t("th",{style:{width:"10%"}},"Action")])],-1)),t("tbody",null,[(r(!0),i(A,null,S(u.value,(s,l)=>(r(),i("tr",{key:u.value.id},[t("td",null,n(s.id),1),t("td",null,n(s.purchase_code),1),t("td",null,n(s.supplier.first_name)+" "+n(s.supplier.last_name),1),t("td",null,n(s.warehouse.name),1),t("td",null,n(s.received_amount),1),t("td",null,[s.payment_status===1?(r(),i("span",W,"Cash")):m("",!0),s.payment_status===2?(r(),i("span",z,"partially paid")):m("",!0),s.payment_status===3?(r(),i("span",G,"Credit")):m("",!0)]),t("td",J,[t("a",{href:a.route("admin.create.perches.return",s.id)},e[5]||(e[5]=[t("img",{src:"/images/icon/return_icon.png",width:"20px",height:"20px",style:{"margin-right":"10px"},alt:""},null,-1)]),8,K),t("a",{href:a.route("purchases.edit",s.id)},e[6]||(e[6]=[t("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}},null,-1)]),8,Q)])]))),128))])])])])])]),N(M,{isModalOpen:c.value,modalTitle:b.value,onClose:e[0]||(e[0]=s=>c.value=!1),onConfirmDelete:_},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ct as default};
