import{_ as P}from"./AdminLayout-UUPC1Aa5.js";import{D as x}from"./DeleteModel-BUvQdlI9.js";import{e as k,r as d,f as C,p as y,o as u,g as B,h as N,a as e,b as v,c as p,l as O,t as i,F as S,q as F}from"./app-mDYLW31A.js";import"./index-DrsYIacS.js";import{$ as f}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";const $={class:"row mb-2"},A={class:"col-sm-6"},E=["href"],I={class:"col-sm-6"},R={class:"breadcrumb float-sm-right mt-2"},V={class:"breadcrumb-item"},j=["href"],q={class:"row"},L={class:"col-12"},U={class:"card card-secondary"},z={class:"card-body"},H={id:"productTable",class:"table table-hover"},Q={class:"d-flex justify-content-center align-items-center"},X=["href"],Y=["onClick"],nt={__name:"ProductManagement",setup(G){const o=k(),n=d(!1),m=d(""),c=d(null);function _(s,t){c.value=s,m.value=t,n.value=!0}function w(){c.value&&(T(c.value),n.value=!1)}const T=s=>{console.log(s),axios.delete(`/products/${s}`).then(t=>{var a,l,r;(a=t==null?void 0:t.data)!=null&&a.message?(o.warning(t.data.message),h()):(l=t==null?void 0:t.data)!=null&&l.warning?o.warning(t.data.warning):(r=t==null?void 0:t.data)!=null&&r.error&&o.error(t.data.error)}).catch(t=>{var a,l,r,b;(l=(a=t.response)==null?void 0:a.data)!=null&&l.errors?Object.values(t.response.data.errors||{}).flat().forEach(D=>{o.error(D)}):(b=(r=t.response)==null?void 0:r.data)!=null&&b.message?o.error(t.response.data.message):o.error("An unexpected error occurred."),console.error(t)})};C(()=>{h().then(()=>{M()}),y(()=>{const s=localStorage.getItem("successMessage");s&&(o.success(s),localStorage.removeItem("successMessage"))})});const g=d([]),h=async()=>{try{const s=await axios.get("/products");g.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}};function M(){y(()=>{f.fn.DataTable.isDataTable("#productTable")&&f("#productTable").DataTable().destroy(),f("#productTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(o.success(s),localStorage.removeItem("successMessage"))})}return(s,t)=>(u(),B(P,null,{default:N(()=>[e("div",$,[e("div",A,[t[2]||(t[2]=e("h2",{class:"mt-2"},"PRODUCTS",-1)),e("a",{href:s.route("admin.create.products")},t[1]||(t[1]=[e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[e("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),v(" Add New Product")],-1)]),8,E),t[3]||(t[3]=e("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[e("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),v("Product Record")],-1))]),e("div",I,[e("ol",R,[e("li",V,[e("a",{href:s.route("admin.dashboard")},"Home",8,j)]),t[4]||(t[4]=e("li",{class:"breadcrumb-item active"},"Products",-1))])])]),e("div",q,[e("div",L,[e("div",U,[e("div",z,[t[8]||(t[8]=e("h6",{style:{"font-weight":"700"},class:""},"PRODUCT TABLE",-1)),t[9]||(t[9]=e("hr",null,null,-1)),e("table",H,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{style:{width:"8%"}},"#"),e("th",{style:{width:"8%"}},"Product Code"),e("th",{style:{width:"10%"}},"Product Name"),e("th",{style:{width:"10%"}},"Brand Name"),e("th",{style:{width:"10%"}},"Price (Rs.)"),e("th",{style:{width:"10%"}},"Quantity"),e("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),e("tbody",null,[(u(!0),p(S,null,O(g.value,(a,l)=>(u(),p("tr",{key:a.id},[e("td",null,i(1+l),1),e("td",null,i(a.name),1),e("td",null,i(a.code),1),e("td",null,i(a.brand.name),1),e("td",null,i(a.price),1),e("td",null,i(a.warehouse_stocks.length>0?a.warehouse_stocks[0].quantity:0),1),e("td",Q,[e("a",{href:s.route("products.edit",a.id)},t[5]||(t[5]=[e("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}},null,-1)]),8,X),e("a",{onClick:r=>_(a.id,"Delete Product"),style:{cursor:"pointer"}},t[6]||(t[6]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,Y)])]))),128))])])])])])]),F(x,{isModalOpen:n.value,modalTitle:m.value,onClose:t[0]||(t[0]=a=>n.value=!1),onConfirmDelete:w},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{nt as default};
