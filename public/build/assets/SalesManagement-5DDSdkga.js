import{_ as M}from"./AdminLayout-UUPC1Aa5.js";import{D as k}from"./DeleteModel-BUvQdlI9.js";import{e as w,r as i,f as N,p as C,o as l,g as I,h as O,a as t,b as _,c as d,l as R,t as n,s as u,F as E,q as P}from"./app-mDYLW31A.js";import"./index-DrsYIacS.js";import{$ as B}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";const V={class:"row mb-2"},$={class:"col-sm-6"},A=["href"],F={class:"col-sm-6"},j={class:"breadcrumb float-sm-right mt-2"},L={class:"breadcrumb-item"},q=["href"],H={class:"row"},J={class:"col-12"},W={class:"card card-secondary"},z={class:"card-body"},G={id:"shopTable",class:"table table-hover"},K={key:0,class:"badge bg-info"},Q={key:1,class:"badge bg-warning"},U={key:2,class:"badge bg-success"},X=["href"],Y={class:"d-flex justify-content-center align-items-center"},Z=["href"],tt=["href"],ht={__name:"SalesManagement",setup(et){const r=w(),c=i(!1),b=i(""),f=i(null);function y(){f.value&&(v(f.value),c.value=!1)}const v=s=>{axios.delete(`/shops/${s}`).then(e=>{var a,o;(a=e==null?void 0:e.data)!=null&&a.message?(r.warning(e.data.message),m()):(o=e==null?void 0:e.data)!=null&&o.error&&r.error(e.data.error)}).catch(e=>{var a,o,g,p;(o=(a=e.response)==null?void 0:a.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(x=>{r.error(x)}):(p=(g=e.response)==null?void 0:g.data)!=null&&p.message?r.error(e.response.data.message):r.error("An unexpected error occurred."),console.error(e)})},S=()=>{};N(()=>{T(),m(),B("#shopTable").DataTable(),C(()=>{const s=localStorage.getItem("successMessage");s&&(r.success(s),localStorage.removeItem("successMessage"))})});const D=i([]),m=async()=>{try{const s=await axios.get("/shops");D.value=s.data,console.log(s)}catch(s){console.error("Error fetching courses:",s)}},h=i([]),T=async()=>{try{const s=await axios.get("/sales");h.value=s.data}catch(s){console.error("Error fetching courses:",s)}};return(s,e)=>(l(),I(M,null,{default:O(()=>[t("div",V,[t("div",$,[e[2]||(e[2]=t("h2",{class:"mt-2"},"SALES",-1)),t("a",{href:s.route("admin.create.Sales")},e[1]||(e[1]=[t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[t("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),_(" Create New Sales")],-1)]),8,A),e[3]||(e[3]=t("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[t("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),_("Sales Record")],-1))]),t("div",F,[t("ol",j,[t("li",L,[t("a",{href:s.route("admin.dashboard")},"Home",8,q)]),e[4]||(e[4]=t("li",{class:"breadcrumb-item active"},"Sales",-1))])])]),t("div",H,[t("div",J,[t("div",W,[e[8]||(e[8]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Sales Details")],-1)),t("div",z,[t("table",G,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",{style:{width:"8%"}},"Sale ID"),t("th",null,"Purchase Items"),t("th",null,"Sub Total (RS.)"),t("th",null,"Warehouse Name"),t("th",null,"Date"),t("th",null,"Shop Name"),t("th",null,"Ref ID"),t("th",null,"Oder Status"),t("th",null,"Sub Total (RS)"),t("th",null,"Payment (RS)"),t("th",null,"Print"),t("th",null,"Action")])],-1)),t("tbody",null,[(l(!0),d(E,null,R(h.value,(a,o)=>(l(),d("tr",{key:a.sale_id},[t("td",null,n(1+o),1),t("td",null,n(a.created_at),1),t("td",null,n(a.shop.name),1),t("td",null,n(a.ref_name),1),t("td",null,[+a.order_status==1?(l(),d("span",K,"Start To Print")):u("",!0),+a.order_status==2?(l(),d("span",Q,"Print")):u("",!0),+a.order_status==3?(l(),d("span",U,"Delivered")):u("",!0)]),t("td",null,n(a.total_price),1),t("td",null,n(a.received_amount),1),t("td",null,[t("a",{href:s.route("sale.print",{sale:JSON.stringify(a)}),target:"_blank"},[t("i",{class:"fas fa-solid fa-print",style:{color:"#000000","margin-right":"5px",cursor:"pointer"},onClick:S})],8,X)]),t("td",Y,[t("a",{href:s.route("admin.create.sales.return",a.sale_id)},e[5]||(e[5]=[t("img",{src:"/images/icon/return_icon.png",width:"20px",height:"20px",style:{"margin-right":"10px"},alt:""},null,-1)]),8,Z),t("a",{href:s.route("sales.edit",a.sale_id)},e[6]||(e[6]=[t("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}},null,-1)]),8,tt)])]))),128))])])])])])]),P(k,{isModalOpen:c.value,modalTitle:b.value,onClose:e[0]||(e[0]=a=>c.value=!1),onConfirmDelete:y},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{ht as default};
