import{e as j,r as n,f as q,p as I,j as U,n as f,o as d,g as L,h as Y,a,b as z,w as H,d as D,k as S,c as u,l as T,t as m,F as h,v as X,q as G}from"./app-JnpFVuSp.js";import{_ as J}from"./AdminLayout-CP0E-03s.js";import{D as K}from"./DeleteModel-BRrvAzfs.js";import{$ as c}from"./dataTables.bootstrap4.min-DdNG8ZfS.js";import"./AdminFooter-CrMPERQ2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const Q={class:"row mb-2"},W={class:"col-sm-6"},Z={class:"breadcrumb float-sm-right"},ee={class:"breadcrumb-item"},ae=["href"],te={class:"row"},se={class:"col-12"},oe={class:"card card-secondary"},le={class:"card-body"},ie={class:"row"},re={class:"col-6"},ne={class:"form-group"},de=["value"],ce={class:"col-6"},ue={class:"form-group"},ve=["value"],fe={class:"col-lg-6 mt-3"},me={class:"col-10 mt-3"},ye=["onUpdate:modelValue"],pe={class:"col-2"},be=["onClick"],ge={class:"row"},Te={class:"col-12"},he={class:"card card-secondary"},_e={class:"card-body"},Ve={id:"variationType",class:"table table-hover",style:{width:"100%"}},we={class:"text-center"},De=["onClick"],Pe={__name:"VariationTypeManagement",setup(ke){const i=j();n([]);const l=n({xxx:"",name:"",variation_id:"",variation_type_Id:"",values:[]}),_=n(null),k=n([]),M=n([]),x=n([]),y=n(!1),E=n(""),V=n(null);q(()=>{C().then(()=>{p()}),I(()=>{const s=localStorage.getItem("successMessage");s&&(i.success(s),localStorage.removeItem("successMessage"))})}),U(()=>l.value.variation_id,s=>{N(s),b(),c.fn.DataTable.isDataTable("#variationType")&&(c("#variationType").DataTable().destroy(),b().then(()=>{p()}))});function p(){I(()=>{c.fn.DataTable.isDataTable("#variationType")&&c("#variationType").DataTable().destroy(),c("#variationType").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const s=localStorage.getItem("successMessage");s&&(i.success(s),localStorage.removeItem("successMessage"))})}const C=async()=>{try{const s=await f.get(route("get.variation.data"));k.value=s.data}catch(s){console.error("Error fetching variation type:",s)}},N=async s=>{try{const e=await f.get(route("get.variation.type.data",{variation_id:s}));M.value=e.data,console.log(e)}catch(e){console.error("Error fetching variation type:",e)}},b=async s=>{try{const e=await f.get(route("get.variation.type.value.data",{variation_id:l.value.variation_id}));x.value=e.data,console.log(e)}catch(e){console.error("Error fetching variation type:",e)}},A=s=>{if(s.preventDefault(),!_.value.checkValidity()){_.value.classList.add("was-validated");return}f.post("/variationTypes",l.value).then(e=>{var t,o;(t=e==null?void 0:e.data)!=null&&t.message?(i.success(e.data.message),l.value.values=[],l.value.name="",c.fn.DataTable.isDataTable("#variationType")&&(c("#variationType").DataTable().destroy(),b().then(()=>{p()}))):(o=e==null?void 0:e.data)!=null&&o.error&&i.error(e.data.error)}).catch(e=>{var t,o,r,v,w,g;(o=(t=e.response)==null?void 0:t.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(B=>{i.error(B)}):(v=(r=e.response)==null?void 0:r.data)!=null&&v.error?i.error(e.response.data.error):(g=(w=e.response)==null?void 0:w.data)!=null&&g.message?i.error(e.response.data.message):i.error("An unexpected error occurred."),console.error(e)})},P=s=>{f.delete(`/variationTypes/${s}`).then(e=>{var t,o;(t=e==null?void 0:e.data)!=null&&t.message?(i.warning(e.data.message),c.fn.DataTable.isDataTable("#variationType")&&(c("#variationType").DataTable().destroy(),b().then(()=>{p()}))):(o=e==null?void 0:e.data)!=null&&o.error&&i.error(e.data.error)}).catch(e=>{var t,o,r,v;(o=(t=e.response)==null?void 0:t.data)!=null&&o.errors?Object.values(e.response.data.errors||{}).flat().forEach(g=>{i.error(g)}):(v=(r=e.response)==null?void 0:r.data)!=null&&v.message?i.error(e.response.data.message):i.error("An unexpected error occurred."),console.error(e)})};function F(){V.value&&(P(V.value),y.value=!1)}function O(s,e){V.value=s,E.value=e,y.value=!0}const R=()=>{console.log(l.value.values),l.value.values.push({value:""})},$=s=>{l.value.values.splice(s,1),console.log(l.value.values)};return(s,e)=>(d(),L(J,null,{default:Y(()=>[a("div",Q,[e[4]||(e[4]=a("div",{class:"col-sm-6"},[a("h3",{class:"mt-3"},"VARIATION TYPE"),a("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[a("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),z("Variation Type Report")])],-1)),a("div",W,[a("ol",Z,[a("li",ee,[a("a",{href:s.route("admin.dashboard")},"Home",8,ae)]),e[3]||(e[3]=a("li",{class:"breadcrumb-item active"},"Variation Type",-1))])])]),a("div",te,[a("div",se,[a("div",oe,[e[13]||(e[13]=a("div",{class:"card-header card-header-background"},[a("h3",{class:"card-title"},"Create New Variation Type"),a("div",{class:"card-tools"},[a("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[a("i",{class:"fas fa-minus"})]),a("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[a("i",{class:"fas fa-times"})])])],-1)),a("div",le,[a("form",{class:"needs-validation",ref_key:"formRef",ref:_,onSubmit:H(A,["prevent"]),novalidate:""},[a("div",ie,[a("div",re,[a("div",ne,[e[6]||(e[6]=a("label",{for:"category-name"},"Variation Name :",-1)),D(a("select",{type:"text",class:"form-control",id:"name",placeholder:"Enter variation Type Name","onUpdate:modelValue":e[0]||(e[0]=t=>l.value.variation_id=t),required:""},[e[5]||(e[5]=a("option",{value:"",disabled:""},"Select Variation",-1)),(d(!0),u(h,null,T(k.value,t=>(d(),u("option",{key:t.id,value:t.id},m(t.name),9,de))),128))],512),[[S,l.value.variation_id]]),e[7]||(e[7]=a("div",{class:"invalid-feedback"}," Please Provide Select Variation Name ",-1))])]),a("div",ce,[a("div",ue,[e[9]||(e[9]=a("label",{for:"category-name"},"Variation Type :",-1)),D(a("select",{type:"text",class:"form-control",id:"name",placeholder:"Enter variation Type Name","onUpdate:modelValue":e[1]||(e[1]=t=>l.value.variation_type_Id=t),required:""},[e[8]||(e[8]=a("option",{value:"",disabled:""},"Select Type",-1)),(d(!0),u(h,null,T(M.value,t=>(d(),u("option",{key:t.id,value:t.id},m(t.name),9,ve))),128))],512),[[S,l.value.variation_type_Id]]),e[10]||(e[10]=a("div",{class:"invalid-feedback"}," Please Provide Select Variation Type ",-1))])]),a("div",fe,[(d(!0),u(h,null,T(l.value.values,(t,o)=>(d(),u("div",{class:"row",key:o},[a("div",me,[D(a("input",{type:"text",class:"form-control",placeholder:"Enter Variation Value ","onUpdate:modelValue":r=>t.value=r,required:""},null,8,ye),[[X,t.value]]),e[11]||(e[11]=a("div",{class:"invalid-feedback"}," Please Provide Enter Variation Value ",-1))]),a("div",pe,[a("button",{type:"button",class:"btn btn-danger mt-3",onClick:r=>$(o)},"Remove",8,be)])]))),128))]),a("div",{class:"col-lg-12 d-flex justify-content-end"},[a("button",{type:"button",class:"btn btn-secondary mt-4 mr-2",onClick:R},"Add Variations Value"),e[12]||(e[12]=a("button",{type:"submit",class:"btn btn-primary mt-4 category-btn"},"Save",-1))])])],544)])])])]),a("div",ge,[a("div",Te,[a("div",he,[a("div",_e,[e[18]||(e[18]=a("h6",{style:{"font-weight":"700"},class:""}," VARIATION TYPE TABLE",-1)),e[19]||(e[19]=a("hr",null,null,-1)),a("table",Ve,[e[17]||(e[17]=a("thead",null,[a("tr",null,[a("th",{style:{width:"20%"}},"ID"),a("th",{style:{width:"40%"}},"Variation Type"),a("th",{style:{width:"20%"}},"Values"),a("th",{style:{"text-align":"center",width:"30%"}},"Action")])],-1)),a("tbody",null,[(d(!0),u(h,null,T(x.value,(t,o)=>(d(),u("tr",{key:t.id},[a("td",null,m(1+o),1),a("td",null,m(t.variation_type_name),1),a("td",null,m(t.values),1),a("td",we,[e[15]||(e[15]=a("a",{href:""},[a("i",{class:"fas fa-regular fa-eye mr-4",style:{color:"#0a7c46"}})],-1)),e[16]||(e[16]=a("a",{href:""},[a("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),a("a",{onClick:r=>O(t.id,"Delete Variation Type"),style:{cursor:"pointer"}},e[14]||(e[14]=[a("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,De)])]))),128))])])])])])]),G(K,{isModalOpen:y.value,modalTitle:E.value,onClose:e[2]||(e[2]=t=>y.value=!1),onConfirmDelete:F},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{Pe as default};
