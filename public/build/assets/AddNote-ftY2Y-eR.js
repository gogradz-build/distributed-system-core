import{r as d,e as x,f as A,o as c,g as E,h as O,a as e,w as $,d as B,v as R,c as m,l as V,t as p,F as H,q as L,n as g}from"./app-mDYLW31A.js";import{_ as q}from"./LecturerDashboardLayout-BlYSCpa6.js";import{D as I}from"./DeleteModel-BUvQdlI9.js";import{$ as U}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */const P={class:"row mb-2"},Y={class:"col-sm-6"},z={class:"breadcrumb float-sm-right"},G={class:"breadcrumb-item"},J=["href"],K={class:"breadcrumb-item"},Q=["href"],W={class:"breadcrumb-item"},X=["href"],Z={class:"row"},ee={class:"col-12"},te={class:"card card-secondary"},se={class:"card-body"},oe={class:"row"},le={class:"col-6"},ae={class:"form-group"},re={class:"col-6"},de={class:"mb-3"},ie={class:"row mt-4"},ce={class:"col-12"},ne={class:"card card-secondary"},ue={class:"card-body"},fe={id:"NoteTable",class:"table table-hover"},me=["href"],ve={key:1},he={class:"d-flex justify-content-center align-items-center"},be=["onClick"],Ce={__name:"AddNote",props:{schedule_id:String,subject_id:String},setup(y){const v=d(null),a=x();d({});const n=d([]),u=d(""),w=y,f=d(!1),D=d(""),h=d(null);function k(o,t,s){h.value=o,D.value="Delete Note",f.value=!0}function j(){h.value&&(C(h.value),f.value=!1)}const C=o=>{g.delete(`/notes/${o}`).then(t=>{var s,l;(s=t==null?void 0:t.data)!=null&&s.message?(b(),a.warning("Note deleted successfully")):(l=t==null?void 0:t.data)!=null&&l.error&&a.error(t.data.error)}).catch(t=>{var s,l,r,i;(l=(s=t.response)==null?void 0:s.data)!=null&&l.errors?Object.values(t.response.data.errors||{}).flat().forEach(M=>{a.error(M)}):(i=(r=t.response)==null?void 0:r.data)!=null&&i.message?a.error(t.response.data.message):a.error("An unexpected error occurred."),console.error(t)})},T=o=>{n.value=o.target.files},F=o=>{if(o.preventDefault(),!v.value.checkValidity()){v.value.classList.add("was-validated");return}const t=new FormData;t.append("title",u.value);for(let s=0;s<n.value.length;s++)t.append("files[]",n.value[s]);g.post(route("notes.add.store",{subject_id:w.subject_id,schedule_id:w.schedule_id}),t).then(s=>{var l,r;console.log(s),(l=s==null?void 0:s.data)!=null&&l.message?(a.success("Note created successfully"),u.value="",n.value=[],b()):(r=s==null?void 0:s.data)!=null&&r.error&&a.error(s.data.error)}).catch(s=>{var l,r,i,_;(r=(l=s.response)==null?void 0:l.data)!=null&&r.errors?Object.values(s.response.data.errors||{}).flat().forEach(S=>{a.error(S)}):(_=(i=s.response)==null?void 0:i.data)!=null&&_.message?a.error(s.response.data.message):a.error("An unexpected error occurred."),console.log(s)})},N=d([]),b=async()=>{try{const o=await g.get("/notes");N.value=o.data,console.log(o)}catch(o){console.error("Error fetching notes:",o)}};return A(()=>{b(),console.log("ok"),U("#NoteTable").DataTable()}),(o,t)=>(c(),E(q,null,{default:O(()=>[e("div",P,[t[3]||(t[3]=e("div",{class:"col-sm-6"},[e("h1",{class:"m-0"},"Notes"),e("span",null,"(NHRS456-Human Resource Introductions)")],-1)),e("div",Y,[e("ol",z,[e("li",G,[e("a",{href:o.route("lecturer.dashboard")},"Home",8,J)]),e("li",K,[e("a",{href:o.route("lecturer.course.show")},"Courses",8,Q)]),e("li",W,[e("a",{href:o.route("lecturer.course.subjects",{id:y.schedule_id})},"Subject",8,X)]),t[2]||(t[2]=e("li",{class:"breadcrumb-item active"},"Note Create",-1))])])]),e("div",Z,[e("div",ee,[e("div",te,[t[8]||(t[8]=e("div",{class:"card-header"},[e("h3",{class:"card-title"},"Add Note"),e("div",{class:"card-tools"},[e("button",{type:"button",class:"btn btn-tool","data-card-widget":"collapse"},[e("i",{class:"fas fa-minus"})]),e("button",{type:"button",class:"btn btn-tool","data-card-widget":"remove"},[e("i",{class:"fas fa-times"})])])],-1)),e("div",se,[e("form",{class:"needs-validation",ref_key:"formRef",ref:v,onSubmit:$(F,["prevent"]),novalidate:""},[e("div",oe,[e("div",le,[e("div",ae,[t[4]||(t[4]=e("label",{for:"subject-title"},"Topic Name",-1)),B(e("input",{type:"text",class:"form-control",id:"title",placeholder:"Enter subject title","onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),required:""},null,512),[[R,u.value]]),t[5]||(t[5]=e("div",{class:"invalid-feedback"}," Please provide a topic name ",-1))])]),e("div",re,[e("div",de,[t[6]||(t[6]=e("label",{for:"formFileMultiple",class:"form-label"},"Upload Your Note (pdf)",-1)),e("input",{class:"form-control",type:"file",id:"formFileMultiple",accept:"application/pdf",onChange:T,multiple:""},null,32)])])]),t[7]||(t[7]=e("div",{class:"row"},[e("div",{class:"col-12 d-flex justify-content-end"},[e("button",{type:"submit",class:"btn btn-primary"},"Save")])],-1))],544)])])])]),e("div",ie,[e("div",ce,[e("div",ne,[e("div",ue,[e("table",fe,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",{style:{width:"20%"}},"#"),e("th",{style:{width:"20%"}},"Topic Name"),e("th",{style:{width:"40%"}},"Document"),e("th",{style:{width:"20%"}},"Created At"),e("th",{style:{width:"20%"}},"Action")])],-1)),e("tbody",null,[(c(!0),m(H,null,V(N.value,(s,l)=>(c(),m("tr",{key:s.id},[e("td",null,p(l+1),1),e("td",null,p(s.title),1),e("td",null,[s.document_url?(c(),m("a",{key:0,href:"/storage/"+s.document_url,target:"_blank"}," Download Document ",8,me)):(c(),m("span",ve,"No document available"))]),e("td",null,p(new Date(s.created_at).toLocaleDateString()),1),e("td",he,[e("a",{onClick:r=>k(s.id,"Delete Note"),style:{cursor:"pointer"}},t[9]||(t[9]=[e("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,be)])]))),128))])])])])])]),L(I,{isModalOpen:f.value,modalTitle:D.value,onClose:t[1]||(t[1]=s=>f.value=!1),onConfirmDelete:j},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{Ce as default};
