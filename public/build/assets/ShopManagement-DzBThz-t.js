import{_ as D}from"./AdminLayout-UUPC1Aa5.js";import{D as M}from"./DeleteModel-BUvQdlI9.js";import{e as N,r as d,f as k,p as v,o as u,g as C,h as E,a as s,b as a,c as y,l as A,t as o,F as O,q as P}from"./app-mDYLW31A.js";import"./index-DrsYIacS.js";import{$ as f}from"./dataTables.bootstrap4.min-B2_zjVPS.js";import"./AdminFooter-BVWJI1Iq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                    */import"side-channel-list";import"side-channel-map";import"side-channel-weakmap";const I={class:"row mb-2"},L={class:"col-sm-6"},B=["href"],F={class:"col-sm-6"},R={class:"breadcrumb float-sm-right mt-2"},H={class:"breadcrumb-item"},$=["href"],j={class:"row"},K={class:"col-12"},V={class:"card card-secondary"},Y={class:"card-body"},q={id:"shopTable",class:"table table-hover"},z={class:"d-flex justify-content-center align-items-center"},X=["onClick"],is={__name:"ShopManagement",setup(G){const r=N(),n=d(!1),p=d(""),c=d(null);function w(e,t){c.value=e,p.value=t,n.value=!0}function S(){c.value&&(T(c.value),n.value=!1)}const T=e=>{axios.delete(`/shops/${e}`).then(t=>{var l,i;(l=t==null?void 0:t.data)!=null&&l.message?(r.warning(t.data.message),h()):(i=t==null?void 0:t.data)!=null&&i.error&&r.error(t.data.error)}).catch(t=>{var l,i,m,g;(i=(l=t.response)==null?void 0:l.data)!=null&&i.errors?Object.values(t.response.data.errors||{}).flat().forEach(_=>{r.error(_)}):(g=(m=t.response)==null?void 0:m.data)!=null&&g.message?r.error(t.response.data.message):r.error("An unexpected error occurred."),console.error(t)})};k(()=>{h().then(()=>{x()}),v(()=>{const e=localStorage.getItem("successMessage");e&&(r.success(e),localStorage.removeItem("successMessage"))})});const b=d([]),h=async()=>{try{const e=await axios.get("/shops");b.value=e.data,console.log(e)}catch(e){console.error("Error fetching courses:",e)}};function x(){v(()=>{f.fn.DataTable.isDataTable("#shopTable")&&f("#shopTable").DataTable().destroy(),f("#shopTable").DataTable({responsive:!0,scrollX:!0,scrollY:"300px",scrollCollapse:!0,paging:!0});const e=localStorage.getItem("successMessage");e&&(r.success(e),localStorage.removeItem("successMessage"))})}return(e,t)=>(u(),C(D,null,{default:E(()=>[s("div",I,[s("div",L,[t[2]||(t[2]=s("h2",{class:"mt-2"},"SHOP",-1)),s("a",{href:e.route("admin.create.shop")},t[1]||(t[1]=[s("button",{type:"button",class:"btn btn-secondary mt-4 mb-4 mr-2"},[s("i",{class:"fas fa-solid fa-plus",style:{color:"#ffffff","margin-right":"5px"}}),a(" Add New Shop")],-1)]),8,B),t[3]||(t[3]=s("button",{type:"button",class:"btn btn-secondary mt-4 mb-4"},[s("i",{class:"fas fa-solid fa-print",style:{color:"#ffffff","margin-right":"5px"}}),a("Shop Record")],-1))]),s("div",F,[s("ol",R,[s("li",H,[s("a",{href:e.route("admin.dashboard")},"Home",8,$)]),t[4]||(t[4]=s("li",{class:"breadcrumb-item active"},"Shop",-1))])])]),s("div",j,[s("div",K,[s("div",V,[s("div",Y,[t[8]||(t[8]=s("h6",{style:{"font-weight":"700"},class:""},"SHOPS TABLE",-1)),t[9]||(t[9]=s("hr",null,null,-1)),s("table",q,[t[7]||(t[7]=s("thead",null,[s("tr",null,[s("th",{style:{width:"8%"}},"ID"),s("th",{style:{width:"10%"}},"Shop Name"),s("th",{style:{width:"20%"}},"Owner Name"),s("th",{style:{width:"10%"}},"Phone No"),s("th",{style:{width:"10%"}},"Credit Limit"),s("th",{style:{width:"10%"}},"Credit"),s("th",{style:{width:"20%"}},"Address"),s("th",{style:{width:"20%"}},"Email"),s("th",{style:{"text-align":"center",width:"8%"}},"Action")])],-1)),s("tbody",null,[(u(!0),y(O,null,A(b.value,(l,i)=>(u(),y("tr",{key:l.id},[s("td",null,o(1+i),1),s("td",null,o(l.name),1),s("td",null,o(l.owner_name),1),s("td",null,o(l.contact),1),s("td",null," RS : "+o(l.credit_limit),1),s("td",null," RS : "+o(l.credit),1),s("td",null,o(l.address),1),s("td",null,o(l.email),1),s("td",z,[t[6]||(t[6]=s("a",{href:"",id:"","data-bs-toggle":"modal","data-bs-target":"#createPayment"},[s("i",{class:"fas fa-solid fa-pen mr-4",style:{color:"#281cdf"}})],-1)),s("a",{onClick:m=>w(l.id,"Delete Shop"),style:{cursor:"pointer"}},t[5]||(t[5]=[s("i",{class:"fas fa-solid fa-trash mr-4",style:{color:"#FF0000"}},null,-1)]),8,X)])]))),128))])])])])])]),t[10]||(t[10]=s("div",{class:"modal fade",id:"createPayment","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[s("div",{class:"modal-dialog modal-xl"},[s("div",{class:"modal-content"},[s("div",{class:"modal-header"},[s("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"SHOP PAYMENT DETAILS"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),s("div",{class:"modal-body"},[s("div",{class:"container bg-body-tertiary"},[s("div",{class:"row d-flex"},[s("div",{class:"col-12"},[s("h5",{class:"text-center mt-2"},"{Shop Name} Payments"),s("hr")]),s("div",{class:"col-12"},[s("form",null,[s("div",{class:"row"},[s("div",{class:"col-6"},[s("p",{class:"text-bold"},"SHOP DETAILS"),s("p",null,[a("Owner Name :- "),s("span",null," Kumara")]),s("p",null,[a("Owner Email :- "),s("span",null," Kumara@gmail.com")]),s("p",null,[a("Contact Number:- "),s("span",null," 0765823564")]),s("p",null,[a("Address:- "),s("span",null," No542, Narahenpita")])]),s("div",{class:"col-lg-6 d-flex justify-content-end pr-4"},[s("div",{class:"mb-3"},[s("p",{class:"text-bold"},"REF DETAILS"),s("p",null,[a("Ref Name :- "),s("span",null,"Kumara")]),s("p",null,[a("ID :- "),s("span",null,"00456")]),s("p",null,[a("Contact Number :- "),s("span",null,"07645856")]),s("p",null,[a("Email Address :- "),s("span",null,"kumara@gmail.com")])])])])]),s("hr")])]),s("div",{class:"row"},[s("div",{class:"col-12"},[s("form",null,[s("div",{class:"row"},[s("div",{class:"col-lg-3 col-12"},[s("div",{class:"mb-3"},[s("input",{type:"text",class:"form-control",id:"credit_limit",placeholder:"Credit Limit"})])]),s("div",{class:"col-lg-3 col-12"},[s("div",{class:"mb-3"},[s("input",{type:"number",class:"form-control",id:"payment",placeholder:"Payments"})])]),s("div",{class:"col-lg-3 col-12"},[s("div",{class:""},[s("button",{class:"btn btn-primary"},"Save Payments")])])])])])])])])])])],-1)),P(M,{isModalOpen:n.value,modalTitle:p.value,onClose:t[0]||(t[0]=l=>n.value=!1),onConfirmDelete:S},null,8,["isModalOpen","modalTitle"])]),_:1}))}};export{is as default};
